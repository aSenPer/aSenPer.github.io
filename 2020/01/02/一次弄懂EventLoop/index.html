<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.asenper.cn","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","Muse | Mist":320,"width":234,"display":"always","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":"ture","show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":"ture","pangu":"ture","comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"slideLeftIn","post_header":"slideLeftIn","post_body":"slideLeftIn","coll_header":"slideLeftIn","sidebar":"perspectiveUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="ÂÖ≥‰∫éEventLoopÁöÑÊñáÁ´†ÂÆûÂú®Â§™Â§ö‰∫ÜÔºå‰ΩÜÊòØÂ•ΩÂÉèËá≥‰ªäÈÉΩÊ≤°Êúâ‰∏ÄÁØáÊØîËæÉÊùÉÂ®ÅÁöÑËØ¥ÊòéÔºå‰ªéÈòÆ‰∏ÄÂ≥∞ËÄÅÂ∏àÁöÑ‰ªÄ‰πàÊòØ Event LoopÔºü‚Äî‚Äî&gt;JavaScript ËøêË°åÊú∫Âà∂ËØ¶Ëß£ÔºöÂÜçË∞àEvent LoopÂÜçÂà∞Êú¥ÁÅµËÄÅÂ∏àÁöÑ„ÄêÊú¥ÁÅµËØÑÊ≥®„ÄëJavaScript ËøêË°åÊú∫Âà∂ËØ¶Ëß£ÔºöÂÜçË∞àEvent LoopËøòÊúâMDNÁöÑÂπ∂ÂèëÊ®°Âûã‰∏é‰∫ã‰ª∂Âæ™ÁéØ ËøôÁØáËÆ≤ÁöÑÊúâ‰∫õÂ§™Á≤æÁÇº‰∫Üüò£ ÈÉΩÊòØÂ§ßÁ•ûÂí±‰πü‰∏çÁü•ÈÅìÂíãËØÑ‰ª∑ÔºåÊÄª‰πãÁúãÂÆå‰ª•ÂêéÂØπ‰∏Ä‰∫õ‰∏úË•øËøòÊòØÂæàüòµÂè™ËÉΩ">
<meta property="og:type" content="article">
<meta property="og:title" content="‰∏ÄÊ¨°ÂºÑÊáÇEventLoop">
<meta property="og:url" content="http://blog.asenper.cn/2020/01/02/%E4%B8%80%E6%AC%A1%E5%BC%84%E6%87%82EventLoop/index.html">
<meta property="og:site_name" content="ZJT&#39;s Blog">
<meta property="og:description" content="ÂÖ≥‰∫éEventLoopÁöÑÊñáÁ´†ÂÆûÂú®Â§™Â§ö‰∫ÜÔºå‰ΩÜÊòØÂ•ΩÂÉèËá≥‰ªäÈÉΩÊ≤°Êúâ‰∏ÄÁØáÊØîËæÉÊùÉÂ®ÅÁöÑËØ¥ÊòéÔºå‰ªéÈòÆ‰∏ÄÂ≥∞ËÄÅÂ∏àÁöÑ‰ªÄ‰πàÊòØ Event LoopÔºü‚Äî‚Äî&gt;JavaScript ËøêË°åÊú∫Âà∂ËØ¶Ëß£ÔºöÂÜçË∞àEvent LoopÂÜçÂà∞Êú¥ÁÅµËÄÅÂ∏àÁöÑ„ÄêÊú¥ÁÅµËØÑÊ≥®„ÄëJavaScript ËøêË°åÊú∫Âà∂ËØ¶Ëß£ÔºöÂÜçË∞àEvent LoopËøòÊúâMDNÁöÑÂπ∂ÂèëÊ®°Âûã‰∏é‰∫ã‰ª∂Âæ™ÁéØ ËøôÁØáËÆ≤ÁöÑÊúâ‰∫õÂ§™Á≤æÁÇº‰∫Üüò£ ÈÉΩÊòØÂ§ßÁ•ûÂí±‰πü‰∏çÁü•ÈÅìÂíãËØÑ‰ª∑ÔºåÊÄª‰πãÁúãÂÆå‰ª•ÂêéÂØπ‰∏Ä‰∫õ‰∏úË•øËøòÊòØÂæàüòµÂè™ËÉΩ">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE3LzE2ODU5Yzk4NDgwNmM3OGQ?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE3LzE2ODU5ZGJiNWI5YzdjYTE?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE3LzE2ODU5ZWQ0ZjYxNDMwNDM?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE3LzE2ODU5ZjJmNGY1ZGEyYTg?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE4LzE2ODVmMDNkN2Y4ODc5MmI?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE4LzE2ODVmMDM3ZDQ4ZGEwZGU?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE4LzE2ODYwNzhjN2EyZjYzZTU?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE4LzE2ODYwYWU1YWQwMmY5OTM?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzIxLzE2ODZlYjI5YTZhMTk2NTg?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE4LzE2ODYwZjM1ZDNhM2U1MGQ?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE4LzE2ODYwZjhmOGY3ZjA1M2Q?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE5LzE2ODY0YjgxNzdjMjVlYWY?x-oss-process=image/format,png">
<meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE5LzE2ODY1MzBiY2Q0ZTQ1NmE?x-oss-process=image/format,png">
<meta property="article:published_time" content="2020-01-02T03:49:37.000Z">
<meta property="article:modified_time" content="2020-06-29T02:53:30.356Z">
<meta property="article:author" content="ZJT">
<meta property="article:tag" content="JS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE3LzE2ODU5Yzk4NDgwNmM3OGQ?x-oss-process=image/format,png">

<link rel="canonical" href="http://blog.asenper.cn/2020/01/02/%E4%B8%80%E6%AC%A1%E5%BC%84%E6%87%82EventLoop/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>‰∏ÄÊ¨°ÂºÑÊáÇEventLoop | ZJT's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="ÂàáÊç¢ÂØºËà™Ê†è">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">ZJT's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">ZJT's Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>È¶ñÈ°µ</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>ÂàÜÁ±ª<span class="badge">15</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>ÂΩíÊ°£<span class="badge">55</span></a>

  </li>
        <li class="menu-item menu-item-ËµÑÊ∫êÂØºËà™">

    <a href="/collection/index.html" rel="section"><i class="fa fa-atlas fa-fw"></i>ËµÑÊ∫êÂØºËà™</a>

  </li>
        <li class="menu-item menu-item-Áõ∏ÂÜå">

    <a href="/gallery/" rel="section"><i class="fa fa-camera-retro fa-fw"></i>Áõ∏ÂÜå</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw fa-fw"></i>ÂÖ≥‰∫é</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>ÊêúÁ¥¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="ÊêúÁ¥¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://blog.asenper.cn/2020/01/02/%E4%B8%80%E6%AC%A1%E5%BC%84%E6%87%82EventLoop/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZJT">
      <meta itemprop="description" content="Âã§ËÉΩË°•ÊãôÊòØËâØËÆ≠Ôºå‰∏ÄÂàÜËæõÂä≥‰∏ÄÂàÜÊâç„ÄÇ ‚Äî‚ÄîÂçéÁΩóÂ∫ö">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZJT's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ‰∏ÄÊ¨°ÂºÑÊáÇEventLoop
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">ÂèëË°®‰∫é</span>
              <time title="ÂàõÂª∫Êó∂Èó¥Ôºö2020-01-02 11:49:37" itemprop="dateCreated datePublished" datetime="2020-01-02T11:49:37+08:00">2020-01-02</time>
            </span>

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">ÂàÜÁ±ª‰∫é</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JS/" itemprop="url" rel="index"><span itemprop="name">JS</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">ValineÔºö</span>
    
    <a title="valine" href="/2020/01/02/%E4%B8%80%E6%AC%A1%E5%BC%84%E6%87%82EventLoop/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/01/02/%E4%B8%80%E6%AC%A1%E5%BC%84%E6%87%82EventLoop/" itemprop="commentCount">0</span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>ÂÖ≥‰∫éEventLoopÁöÑÊñáÁ´†ÂÆûÂú®Â§™Â§ö‰∫ÜÔºå‰ΩÜÊòØÂ•ΩÂÉèËá≥‰ªäÈÉΩÊ≤°Êúâ‰∏ÄÁØáÊØîËæÉÊùÉÂ®ÅÁöÑËØ¥ÊòéÔºå‰ªé<br>ÈòÆ‰∏ÄÂ≥∞ËÄÅÂ∏àÁöÑ<br><a href="http://www.ruanyifeng.com/blog/2013/10/event_loop.html" target="_blank" rel="noopener"><strong>‰ªÄ‰πàÊòØ Event LoopÔºü</strong></a>‚Äî‚Äî&gt;<br><a href="http://www.ruanyifeng.com/blog/2014/10/event-loop.html" target="_blank" rel="noopener"><strong>JavaScript ËøêË°åÊú∫Âà∂ËØ¶Ëß£ÔºöÂÜçË∞àEvent Loop</strong></a><br>ÂÜçÂà∞Êú¥ÁÅµËÄÅÂ∏àÁöÑ<br><a href="https://blog.csdn.net/lin_credible/article/details/40143961" target="_blank" rel="noopener"><strong>„ÄêÊú¥ÁÅµËØÑÊ≥®„ÄëJavaScript ËøêË°åÊú∫Âà∂ËØ¶Ëß£ÔºöÂÜçË∞àEvent Loop</strong></a><br>ËøòÊúâMDNÁöÑ<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop" target="_blank" rel="noopener"><strong>Âπ∂ÂèëÊ®°Âûã‰∏é‰∫ã‰ª∂Âæ™ÁéØ</strong></a> ËøôÁØáËÆ≤ÁöÑÊúâ‰∫õÂ§™Á≤æÁÇº‰∫Üüò£</p>
<p>ÈÉΩÊòØÂ§ßÁ•ûÂí±‰πü‰∏çÁü•ÈÅìÂíãËØÑ‰ª∑ÔºåÊÄª‰πãÁúãÂÆå‰ª•ÂêéÂØπ‰∏Ä‰∫õ‰∏úË•øËøòÊòØÂæàüòµ<br>Âè™ËÉΩÊÖ¢ÊÖ¢‰ªéÂ∑•‰Ωú‰∏≠ÁßØÁ¥Ø‰∫Üüêµ</p>
<p>Êú¨ÊñáÊòØÊàëËÆ§‰∏∫ÊØîËæÉÂÆπÊòìÁêÜËß£ÁöÑ‰∏ÄÁØá<br>ÂéüÊñáÈìæÊé• <a href="https://github.com/baiyuze/notes/issues/8" target="_blank" rel="noopener">https://github.com/baiyuze/notes/issues/8</a></p>
<h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2><p><code>Event Loop</code>Âç≥‰∫ã‰ª∂Âæ™ÁéØÔºåÊòØÊåáÊµèËßàÂô®Êàñ<code>Node</code>ÁöÑ‰∏ÄÁßçËß£ÂÜ≥<code>javaScript</code>ÂçïÁ∫øÁ®ãËøêË°åÊó∂‰∏ç‰ºöÈòªÂ°ûÁöÑ‰∏ÄÁßçÊú∫Âà∂Ôºå‰πüÂ∞±ÊòØÊàë‰ª¨ÁªèÂ∏∏‰ΩøÁî®<strong>ÂºÇÊ≠•</strong>ÁöÑÂéüÁêÜ„ÄÇ</p>
<h2 id="‰∏∫Âï•Ë¶ÅÂºÑÊáÇEvent-Loop"><a href="#‰∏∫Âï•Ë¶ÅÂºÑÊáÇEvent-Loop" class="headerlink" title="‰∏∫Âï•Ë¶ÅÂºÑÊáÇEvent Loop"></a>‰∏∫Âï•Ë¶ÅÂºÑÊáÇEvent Loop</h2><ul>
<li><p>ÊòØË¶ÅÂ¢ûÂä†Ëá™Â∑±ÊäÄÊúØÁöÑÊ∑±Â∫¶Ôºå‰πüÂ∞±ÊòØÊáÇÂæó<code>JavaScript</code>ÁöÑËøêË°åÊú∫Âà∂„ÄÇ</p>
</li>
<li><p>Áé∞Âú®Âú®ÂâçÁ´ØÈ¢ÜÂüüÂêÑÁßçÊäÄÊúØÂ±ÇÂá∫‰∏çÁ©∑ÔºåÊéåÊè°Â∫ïÂ±ÇÂéüÁêÜÔºåÂèØ‰ª•ËÆ©Ëá™Â∑±‰ª•‰∏çÂèòÔºåÂ∫î‰∏áÂèò„ÄÇ</p>
</li>
<li><p>Â∫îÂØπÂêÑÂ§ß‰∫íËÅîÁΩëÂÖ¨Âè∏ÁöÑÈù¢ËØïÔºåÊáÇÂÖ∂ÂéüÁêÜÔºåÈ¢òÁõÆ‰ªªÂÖ∂ÂèëÊå•„ÄÇ</p>
</li>
</ul>
<h2 id="Â†ÜÔºåÊ†à„ÄÅÈòüÂàó"><a href="#Â†ÜÔºåÊ†à„ÄÅÈòüÂàó" class="headerlink" title="Â†ÜÔºåÊ†à„ÄÅÈòüÂàó"></a>Â†ÜÔºåÊ†à„ÄÅÈòüÂàó</h2><p><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE3LzE2ODU5Yzk4NDgwNmM3OGQ?x-oss-process=image/format,png" alt=""></p>
<h3 id="Â†ÜÔºàHeapÔºâ"><a href="#Â†ÜÔºàHeapÔºâ" class="headerlink" title="Â†ÜÔºàHeapÔºâ"></a>Â†ÜÔºàHeapÔºâ</h3><p><strong>Â†Ü</strong>ÊòØ‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑÔºåÊòØÂà©Áî®ÂÆåÂÖ®‰∫åÂèâÊ†ëÁª¥Êä§ÁöÑ‰∏ÄÁªÑÊï∞ÊçÆÔºå<strong>Â†Ü</strong>ÂàÜ‰∏∫‰∏§ÁßçÔºå‰∏ÄÁßç‰∏∫ÊúÄÂ§ß<strong>Â†Ü</strong>Ôºå‰∏ÄÁßç‰∏∫<strong>ÊúÄÂ∞èÂ†Ü</strong>ÔºåÂ∞ÜÊ†πËäÇÁÇπ<strong>ÊúÄÂ§ß</strong>ÁöÑ<strong>Â†Ü</strong>Âè´ÂÅö<strong>ÊúÄÂ§ßÂ†Ü</strong>Êàñ<strong>Â§ßÊ†πÂ†Ü</strong>ÔºåÊ†πËäÇÁÇπ<strong>ÊúÄÂ∞è</strong>ÁöÑ<strong>Â†Ü</strong>Âè´ÂÅö<strong>ÊúÄÂ∞èÂ†Ü</strong>Êàñ<strong>Â∞èÊ†πÂ†Ü</strong>„ÄÇ<br><strong>Â†Ü</strong>ÊòØ<a href="https://www.cnblogs.com/mr-wuxiansheng/p/8688946.html" target="_blank" rel="noopener"><strong>Á∫øÊÄßÊï∞ÊçÆÁªìÊûÑ</strong></a>ÔºåÁõ∏ÂΩì‰∫é<strong>‰∏ÄÁª¥Êï∞ÁªÑ</strong>ÔºåÊúâÂîØ‰∏ÄÂêéÁªß„ÄÇ</p>
<p>Â¶ÇÊúÄÂ§ßÂ†Ü</p>
<p><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE3LzE2ODU5ZGJiNWI5YzdjYTE?x-oss-process=image/format,png" alt=""></p>
<h3 id="Ê†àÔºàStackÔºâ"><a href="#Ê†àÔºàStackÔºâ" class="headerlink" title="Ê†àÔºàStackÔºâ"></a>Ê†àÔºàStackÔºâ</h3><p><strong>Ê†à</strong>Âú®ËÆ°ÁÆóÊú∫ÁßëÂ≠¶‰∏≠ÊòØÈôêÂÆö‰ªÖÂú®<strong>Ë°®Â∞æ</strong>ËøõË°å<strong>ÊèíÂÖ•</strong>Êàñ<strong>Âà†Èô§</strong>Êìç‰ΩúÁöÑÁ∫øÊÄßË°®„ÄÇ <strong>Ê†à</strong>ÊòØ‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑÔºåÂÆÉÊåâÁÖß<strong>ÂêéËøõÂÖàÂá∫</strong>ÁöÑÂéüÂàôÂ≠òÂÇ®Êï∞ÊçÆÔºå<strong>ÂÖàËøõÂÖ•</strong>ÁöÑÊï∞ÊçÆË¢´ÂéãÂÖ•<strong>Ê†àÂ∫ï</strong>Ôºå<strong>ÊúÄÂêéÁöÑÊï∞ÊçÆ</strong>Âú®<strong>Ê†àÈ°∂</strong>ÔºåÈúÄË¶ÅËØªÊï∞ÊçÆÁöÑÊó∂ÂÄô‰ªé<strong>Ê†àÈ°∂</strong>ÂºÄÂßã<strong>ÂºπÂá∫Êï∞ÊçÆ</strong>„ÄÇ<br><strong>Ê†à</strong>ÊòØÂè™ËÉΩÂú®<strong>Êüê‰∏ÄÁ´ØÊèíÂÖ•</strong>Âíå<strong>Âà†Èô§</strong>ÁöÑ<strong>ÁâπÊÆäÁ∫øÊÄßË°®</strong>„ÄÇ</p>
<p><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE3LzE2ODU5ZWQ0ZjYxNDMwNDM?x-oss-process=image/format,png" alt=""></p>
<h3 id="ÈòüÂàóÔºàQueueÔºâ"><a href="#ÈòüÂàóÔºàQueueÔºâ" class="headerlink" title="ÈòüÂàóÔºàQueueÔºâ"></a>ÈòüÂàóÔºàQueueÔºâ</h3><p>ÁâπÊÆä‰πãÂ§ÑÂú®‰∫éÂÆÉÂè™ÂÖÅËÆ∏Âú®Ë°®ÁöÑÂâçÁ´ØÔºà<code>front</code>ÔºâËøõË°å<strong>Âà†Èô§</strong>Êìç‰ΩúÔºåËÄåÂú®Ë°®ÁöÑÂêéÁ´ØÔºà<code>rear</code>ÔºâËøõË°å<strong>ÊèíÂÖ•</strong>Êìç‰ΩúÔºåÂíå<strong>Ê†à</strong>‰∏ÄÊ†∑Ôºå<strong>ÈòüÂàó</strong>ÊòØ‰∏ÄÁßçÊìç‰ΩúÂèóÈôêÂà∂ÁöÑÁ∫øÊÄßË°®„ÄÇ<br>ËøõË°å<strong>ÊèíÂÖ•</strong>Êìç‰ΩúÁöÑÁ´ØÁß∞‰∏∫<strong>ÈòüÂ∞æ</strong>ÔºåËøõË°å<strong>Âà†Èô§</strong>Êìç‰ΩúÁöÑÁ´ØÁß∞‰∏∫<strong>ÈòüÂ§¥</strong>„ÄÇ ÈòüÂàó‰∏≠Ê≤°ÊúâÂÖÉÁ¥†Êó∂ÔºåÁß∞‰∏∫<strong>Á©∫ÈòüÂàó</strong>„ÄÇ</p>
<p><strong>ÈòüÂàó</strong>ÁöÑÊï∞ÊçÆÂÖÉÁ¥†ÂèàÁß∞‰∏∫<strong>ÈòüÂàóÂÖÉÁ¥†</strong>„ÄÇÂú®ÈòüÂàó‰∏≠ÊèíÂÖ•‰∏Ä‰∏™ÈòüÂàóÂÖÉÁ¥†Áß∞‰∏∫<strong>ÂÖ•Èòü</strong>Ôºå‰ªé<strong>ÈòüÂàó</strong>‰∏≠<strong>Âà†Èô§</strong>‰∏Ä‰∏™ÈòüÂàóÂÖÉÁ¥†Áß∞‰∏∫<strong>Âá∫Èòü</strong>„ÄÇÂõ†‰∏∫ÈòüÂàó<strong>Âè™ÂÖÅËÆ∏</strong>Âú®‰∏ÄÁ´Ø<strong>ÊèíÂÖ•</strong>ÔºåÂú®Âè¶‰∏ÄÁ´Ø<strong>Âà†Èô§</strong>ÔºåÊâÄ‰ª•Âè™Êúâ<strong>ÊúÄÊó©</strong>ËøõÂÖ•<strong>ÈòüÂàó</strong>ÁöÑÂÖÉÁ¥†<strong>ÊâçËÉΩÊúÄÂÖà‰ªéÈòüÂàó‰∏≠</strong>Âà†Èô§ÔºåÊïÖÈòüÂàóÂèàÁß∞‰∏∫<strong>ÂÖàËøõÂÖàÂá∫</strong>Ôºà<code>FIFO‚Äîfirst in first out</code>Ôºâ</p>
<p><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE3LzE2ODU5ZjJmNGY1ZGEyYTg?x-oss-process=image/format,png" alt=""></p>
<h2 id="Event-Loop"><a href="#Event-Loop" class="headerlink" title="Event Loop"></a>Event Loop</h2><p>Âú®<code>JavaScript</code>‰∏≠Ôºå‰ªªÂä°Ë¢´ÂàÜ‰∏∫‰∏§ÁßçÔºå‰∏ÄÁßçÂÆè‰ªªÂä°Ôºà<code>MacroTask</code>Ôºâ‰πüÂè´<code>Task</code>Ôºå‰∏ÄÁßçÂè´ÂæÆ‰ªªÂä°Ôºà<code>MicroTask</code>Ôºâ„ÄÇ</p>
<h3 id="MacroTaskÔºàÂÆè‰ªªÂä°Ôºâ"><a href="#MacroTaskÔºàÂÆè‰ªªÂä°Ôºâ" class="headerlink" title="MacroTaskÔºàÂÆè‰ªªÂä°Ôºâ"></a>MacroTaskÔºàÂÆè‰ªªÂä°Ôºâ</h3><ul>
<li><code>script</code>ÂÖ®ÈÉ®‰ª£Á†Å„ÄÅ<code>setTimeout</code>„ÄÅ<code>setInterval</code>„ÄÅ<code>setImmediate</code>ÔºàÊµèËßàÂô®ÊöÇÊó∂‰∏çÊîØÊåÅÔºåÂè™ÊúâIE10ÊîØÊåÅÔºåÂÖ∑‰ΩìÂèØËßÅ<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/setImmediate" target="_blank" rel="noopener"><code>MDN</code></a>Ôºâ„ÄÅ<code>I/O</code>„ÄÅ<code>UI Rendering</code>„ÄÇ</li>
</ul>
<h3 id="MicroTaskÔºàÂæÆ‰ªªÂä°Ôºâ"><a href="#MicroTaskÔºàÂæÆ‰ªªÂä°Ôºâ" class="headerlink" title="MicroTaskÔºàÂæÆ‰ªªÂä°Ôºâ"></a>MicroTaskÔºàÂæÆ‰ªªÂä°Ôºâ</h3><ul>
<li><code>Process.nextTickÔºàNodeÁã¨ÊúâÔºâ</code>„ÄÅ<code>Promise</code>„ÄÅ<code>Object.observe(Â∫üÂºÉ)</code>„ÄÅ<code>MutationObserver</code>ÔºàÂÖ∑‰Ωì‰ΩøÁî®ÊñπÂºèÊü•Áúã<a href="http://javascript.ruanyifeng.com/dom/mutationobserver.html" target="_blank" rel="noopener">ËøôÈáå</a>Ôºâ</li>
</ul>
<h2 id="ÊµèËßàÂô®‰∏≠ÁöÑEvent-Loop"><a href="#ÊµèËßàÂô®‰∏≠ÁöÑEvent-Loop" class="headerlink" title="ÊµèËßàÂô®‰∏≠ÁöÑEvent Loop"></a>ÊµèËßàÂô®‰∏≠ÁöÑEvent Loop</h2><p><code>Javascript</code> Êúâ‰∏Ä‰∏™ <code>main thread</code> ‰∏ªÁ∫øÁ®ãÂíå <code>call-stack</code> Ë∞ÉÁî®Ê†à(ÊâßË°åÊ†à)ÔºåÊâÄÊúâÁöÑ‰ªªÂä°ÈÉΩ‰ºöË¢´ÊîæÂà∞Ë∞ÉÁî®Ê†àÁ≠âÂæÖ‰∏ªÁ∫øÁ®ãÊâßË°å„ÄÇ</p>
<h3 id="JSË∞ÉÁî®Ê†à"><a href="#JSË∞ÉÁî®Ê†à" class="headerlink" title="JSË∞ÉÁî®Ê†à"></a>JSË∞ÉÁî®Ê†à</h3><p>JSË∞ÉÁî®Ê†àÈááÁî®ÁöÑÊòØÂêéËøõÂÖàÂá∫ÁöÑËßÑÂàôÔºåÂΩìÂáΩÊï∞ÊâßË°åÁöÑÊó∂ÂÄôÔºå‰ºöË¢´Ê∑ªÂä†Âà∞Ê†àÁöÑÈ°∂ÈÉ®ÔºåÂΩìÊâßË°åÊ†àÊâßË°åÂÆåÊàêÂêéÔºåÂ∞±‰ºö‰ªéÊ†àÈ°∂ÁßªÂá∫ÔºåÁõ¥Âà∞Ê†àÂÜÖË¢´Ê∏ÖÁ©∫„ÄÇ</p>
<h3 id="ÂêåÊ≠•‰ªªÂä°ÂíåÂºÇÊ≠•‰ªªÂä°"><a href="#ÂêåÊ≠•‰ªªÂä°ÂíåÂºÇÊ≠•‰ªªÂä°" class="headerlink" title="ÂêåÊ≠•‰ªªÂä°ÂíåÂºÇÊ≠•‰ªªÂä°"></a>ÂêåÊ≠•‰ªªÂä°ÂíåÂºÇÊ≠•‰ªªÂä°</h3><p><code>Javascript</code>ÂçïÁ∫øÁ®ã‰ªªÂä°Ë¢´ÂàÜ‰∏∫<strong>ÂêåÊ≠•‰ªªÂä°</strong>Âíå<strong>ÂºÇÊ≠•‰ªªÂä°</strong>ÔºåÂêåÊ≠•‰ªªÂä°‰ºöÂú®Ë∞ÉÁî®Ê†à‰∏≠ÊåâÁÖßÈ°∫Â∫èÁ≠âÂæÖ‰∏ªÁ∫øÁ®ã‰æùÊ¨°ÊâßË°åÔºåÂºÇÊ≠•‰ªªÂä°‰ºöÂú®ÂºÇÊ≠•‰ªªÂä°Êúâ‰∫ÜÁªìÊûúÂêéÔºåÂ∞ÜÊ≥®ÂÜåÁöÑÂõûË∞ÉÂáΩÊï∞ÊîæÂÖ•‰ªªÂä°ÈòüÂàó‰∏≠Á≠âÂæÖ‰∏ªÁ∫øÁ®ãÁ©∫Èó≤ÁöÑÊó∂ÂÄôÔºàË∞ÉÁî®Ê†àË¢´Ê∏ÖÁ©∫ÔºâÔºåË¢´ËØªÂèñÂà∞Ê†àÂÜÖÁ≠âÂæÖ‰∏ªÁ∫øÁ®ãÁöÑÊâßË°å„ÄÇ</p>
<p><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE4LzE2ODVmMDNkN2Y4ODc5MmI?x-oss-process=image/format,png" alt=""></p>
<p>‰ªªÂä°ÈòüÂàó<code>Task Queue</code>ÔºåÂç≥ÈòüÂàóÔºåÊòØ‰∏ÄÁßçÂÖàËøõÂÖàÂá∫ÁöÑ‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑ„ÄÇ</p>
<p><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE4LzE2ODVmMDM3ZDQ4ZGEwZGU?x-oss-process=image/format,png" alt=""></p>
<h3 id="‰∫ã‰ª∂Âæ™ÁéØÁöÑËøõÁ®ãÊ®°Âûã"><a href="#‰∫ã‰ª∂Âæ™ÁéØÁöÑËøõÁ®ãÊ®°Âûã" class="headerlink" title="‰∫ã‰ª∂Âæ™ÁéØÁöÑËøõÁ®ãÊ®°Âûã"></a>‰∫ã‰ª∂Âæ™ÁéØÁöÑËøõÁ®ãÊ®°Âûã</h3><ul>
<li>ÈÄâÊã©ÂΩìÂâçË¶ÅÊâßË°åÁöÑ‰ªªÂä°ÈòüÂàóÔºåÈÄâÊã©‰ªªÂä°ÈòüÂàó‰∏≠ÊúÄÂÖàËøõÂÖ•ÁöÑ‰ªªÂä°ÔºåÂ¶ÇÊûú‰ªªÂä°ÈòüÂàó‰∏∫Á©∫Âç≥<code>null</code>ÔºåÂàôÊâßË°åË∑≥ËΩ¨Âà∞ÂæÆ‰ªªÂä°Ôºà<code>MicroTask</code>ÔºâÁöÑÊâßË°åÊ≠•È™§„ÄÇ</li>
<li>Â∞Ü‰∫ã‰ª∂Âæ™ÁéØ‰∏≠ÁöÑ‰ªªÂä°ËÆæÁΩÆ‰∏∫Â∑≤ÈÄâÊã©‰ªªÂä°„ÄÇ</li>
<li>ÊâßË°å‰ªªÂä°„ÄÇ</li>
<li>Â∞Ü‰∫ã‰ª∂Âæ™ÁéØ‰∏≠ÂΩìÂâçËøêË°å‰ªªÂä°ËÆæÁΩÆ‰∏∫null„ÄÇ</li>
<li>Â∞ÜÂ∑≤ÁªèËøêË°åÂÆåÊàêÁöÑ‰ªªÂä°‰ªé‰ªªÂä°ÈòüÂàó‰∏≠Âà†Èô§„ÄÇ</li>
<li>microtasksÊ≠•È™§ÔºöËøõÂÖ•microtaskÊ£ÄÊü•ÁÇπ„ÄÇ</li>
<li>Êõ¥Êñ∞ÁïåÈù¢Ê∏≤Êüì„ÄÇ</li>
<li>ËøîÂõûÁ¨¨‰∏ÄÊ≠•„ÄÇ</li>
</ul>
<h3 id="ÊâßË°åËøõÂÖ•microtaskÊ£ÄÊü•ÁÇπÊó∂ÔºåÁî®Êà∑‰ª£ÁêÜ‰ºöÊâßË°å‰ª•‰∏ãÊ≠•È™§"><a href="#ÊâßË°åËøõÂÖ•microtaskÊ£ÄÊü•ÁÇπÊó∂ÔºåÁî®Êà∑‰ª£ÁêÜ‰ºöÊâßË°å‰ª•‰∏ãÊ≠•È™§" class="headerlink" title="ÊâßË°åËøõÂÖ•microtaskÊ£ÄÊü•ÁÇπÊó∂ÔºåÁî®Êà∑‰ª£ÁêÜ‰ºöÊâßË°å‰ª•‰∏ãÊ≠•È™§"></a>ÊâßË°åËøõÂÖ•microtaskÊ£ÄÊü•ÁÇπÊó∂ÔºåÁî®Êà∑‰ª£ÁêÜ‰ºöÊâßË°å‰ª•‰∏ãÊ≠•È™§</h3><ul>
<li>ËÆæÁΩÆmicrotaskÊ£ÄÊü•ÁÇπÊ†áÂøó‰∏∫true„ÄÇ</li>
<li>ÂΩì‰∫ã‰ª∂Âæ™ÁéØ<code>microtask</code>ÊâßË°å‰∏ç‰∏∫Á©∫Êó∂ÔºöÈÄâÊã©‰∏Ä‰∏™ÊúÄÂÖàËøõÂÖ•ÁöÑ<code>microtask</code>ÈòüÂàóÁöÑ<code>microtask</code>ÔºåÂ∞Ü‰∫ã‰ª∂Âæ™ÁéØÁöÑ<code>microtask</code>ËÆæÁΩÆ‰∏∫Â∑≤ÈÄâÊã©ÁöÑ<code>microtask</code>ÔºåËøêË°å<code>microtask</code>ÔºåÂ∞ÜÂ∑≤ÁªèÊâßË°åÂÆåÊàêÁöÑ<code>microtask</code>‰∏∫<code>null</code>ÔºåÁßªÂá∫<code>microtask</code>‰∏≠ÁöÑ<code>microtask</code>„ÄÇ</li>
<li>Ê∏ÖÁêÜIndexDB‰∫ãÂä°</li>
<li>ËÆæÁΩÆËøõÂÖ•microtaskÊ£ÄÊü•ÁÇπÁöÑÊ†áÂøó‰∏∫false„ÄÇ</li>
</ul>
<p>‰∏äËø∞ÂèØËÉΩ‰∏çÂ§™Â•ΩÁêÜËß£Ôºå‰∏ãÂõæÊòØÊàëÂÅöÁöÑ‰∏ÄÂº†ÂõæÁâá„ÄÇ</p>
<p><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE4LzE2ODYwNzhjN2EyZjYzZTU?x-oss-process=image/format,png" alt=""></p>
<p>ÊâßË°åÊ†àÂú®ÊâßË°åÂÆå<strong>ÂêåÊ≠•‰ªªÂä°</strong>ÂêéÔºåÊü•Áúã<strong>ÊâßË°åÊ†à</strong>ÊòØÂê¶‰∏∫Á©∫ÔºåÂ¶ÇÊûúÊâßË°åÊ†à‰∏∫Á©∫ÔºåÂ∞±‰ºöÂéªÊ£ÄÊü•<strong>ÂæÆ‰ªªÂä°</strong>(<code>microTask</code>)ÈòüÂàóÊòØÂê¶‰∏∫Á©∫ÔºåÂ¶ÇÊûú‰∏∫Á©∫ÁöÑËØùÔºåÂ∞±ÊâßË°å<code>Task</code>ÔºàÂÆè‰ªªÂä°ÔºâÔºåÂê¶ÂàôÂ∞±‰∏ÄÊ¨°ÊÄßÊâßË°åÂÆåÊâÄÊúâÂæÆ‰ªªÂä°„ÄÇ<br>ÊØèÊ¨°Âçï‰∏™<strong>ÂÆè‰ªªÂä°</strong>ÊâßË°åÂÆåÊØïÂêéÔºåÊ£ÄÊü•<strong>ÂæÆ‰ªªÂä°</strong>(<code>microTask</code>)ÈòüÂàóÊòØÂê¶‰∏∫Á©∫ÔºåÂ¶ÇÊûú‰∏ç‰∏∫Á©∫ÁöÑËØùÔºå‰ºöÊåâÁÖß<strong>ÂÖàÂÖ•ÂÖà</strong>Âá∫ÁöÑËßÑÂàôÂÖ®ÈÉ®ÊâßË°åÂÆå<strong>ÂæÆ‰ªªÂä°</strong>(<code>microTask</code>)ÂêéÔºåËÆæÁΩÆ<strong>ÂæÆ‰ªªÂä°</strong>(<code>microTask</code>)ÈòüÂàó‰∏∫<code>null</code>ÔºåÁÑ∂ÂêéÂÜçÊâßË°å<strong>ÂÆè‰ªªÂä°</strong>ÔºåÂ¶ÇÊ≠§Âæ™ÁéØ„ÄÇ</p>
<h2 id="‰∏æ‰∏™‰æãÂ≠ê"><a href="#‰∏æ‰∏™‰æãÂ≠ê" class="headerlink" title="‰∏æ‰∏™‰æãÂ≠ê"></a>‰∏æ‰∏™‰æãÂ≠ê</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'script start'</span>);</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'setTimeout'</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'promise1'</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'promise2'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'script end'</span>);</span><br></pre></td></tr></table></figure>

<p>È¶ñÂÖàÊàë‰ª¨ÂàíÂàÜÂá†‰∏™ÂàÜÁ±ªÔºö</p>
<h3 id="Á¨¨‰∏ÄÊ¨°ÊâßË°å"><a href="#Á¨¨‰∏ÄÊ¨°ÊâßË°å" class="headerlink" title="Á¨¨‰∏ÄÊ¨°ÊâßË°å"></a>Á¨¨‰∏ÄÊ¨°ÊâßË°å</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">TasksÔºörun script„ÄÅ setTimeout callback</span><br><span class="line"></span><br><span class="line">MicrotasksÔºö<span class="built_in">Promise</span> then</span><br><span class="line"></span><br><span class="line">JS stack: script</span><br><span class="line">Log: script start„ÄÅscript end„ÄÇ</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÂêåÊ≠•‰ª£Á†ÅÔºåÂ∞ÜÂÆè‰ªªÂä°Ôºà<code>Tasks</code>ÔºâÂíåÂæÆ‰ªªÂä°(<code>Microtasks</code>)ÂàíÂàÜÂà∞ÂêÑËá™ÈòüÂàó‰∏≠„ÄÇ</p>
<h3 id="Á¨¨‰∫åÊ¨°ÊâßË°å"><a href="#Á¨¨‰∫åÊ¨°ÊâßË°å" class="headerlink" title="Á¨¨‰∫åÊ¨°ÊâßË°å"></a>Á¨¨‰∫åÊ¨°ÊâßË°å</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">TasksÔºörun script„ÄÅ setTimeout callback</span><br><span class="line"></span><br><span class="line">MicrotasksÔºöPromise2 then</span><br><span class="line"></span><br><span class="line">JS stack: Promise2 callback</span><br><span class="line">Log: script start„ÄÅscript end„ÄÅpromise1„ÄÅpromise2</span><br></pre></td></tr></table></figure>

<p>ÊâßË°åÂÆè‰ªªÂä°ÂêéÔºåÊ£ÄÊµãÂà∞ÂæÆ‰ªªÂä°(<code>Microtasks</code>)ÈòüÂàó‰∏≠‰∏ç‰∏∫Á©∫ÔºåÊâßË°å<code>Promise1</code>ÔºåÊâßË°åÂÆåÊàê<code>Promise1</code>ÂêéÔºåË∞ÉÁî®<code>Promise2.then</code>ÔºåÊîæÂÖ•ÂæÆ‰ªªÂä°(<code>Microtasks</code>)ÈòüÂàó‰∏≠ÔºåÂÜçÊâßË°å<code>Promise2.then</code>„ÄÇ</p>
<h3 id="Á¨¨‰∏âÊ¨°ÊâßË°å"><a href="#Á¨¨‰∏âÊ¨°ÊâßË°å" class="headerlink" title="Á¨¨‰∏âÊ¨°ÊâßË°å"></a>Á¨¨‰∏âÊ¨°ÊâßË°å</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">TasksÔºösetTimeout callback</span><br><span class="line"></span><br><span class="line">MicrotasksÔºö</span><br><span class="line"></span><br><span class="line">JS stack: setTimeout callback</span><br><span class="line">Log: script start„ÄÅscript end„ÄÅpromise1„ÄÅpromise2„ÄÅsetTimeout</span><br></pre></td></tr></table></figure>

<p>ÂΩìÂæÆ‰ªªÂä°(<code>Microtasks</code>)ÈòüÂàó‰∏≠‰∏∫Á©∫Êó∂ÔºåÊâßË°åÂÆè‰ªªÂä°Ôºà<code>Tasks</code>ÔºâÔºåÊâßË°å<code>setTimeout callback</code>ÔºåÊâìÂç∞Êó•Âøó„ÄÇ</p>
<h3 id="Á¨¨ÂõõÊ¨°ÊâßË°å"><a href="#Á¨¨ÂõõÊ¨°ÊâßË°å" class="headerlink" title="Á¨¨ÂõõÊ¨°ÊâßË°å"></a>Á¨¨ÂõõÊ¨°ÊâßË°å</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">TasksÔºösetTimeout callback</span><br><span class="line"></span><br><span class="line">MicrotasksÔºö</span><br><span class="line"></span><br><span class="line">JS stack:</span><br><span class="line">Log: script start„ÄÅscript end„ÄÅpromise1„ÄÅpromise2„ÄÅsetTimeout</span><br></pre></td></tr></table></figure>

<p>Ê∏ÖÁ©∫<strong>Tasks</strong>ÈòüÂàóÂíå<code>JS stack</code>„ÄÇ</p>
<p>‰ª•‰∏äÊâßË°åÂ∏ßÂä®ÁîªÂèØ‰ª•Êü•Áúã<a href="https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/" target="_blank" rel="noopener">Tasks, microtasks, queues and schedules</a><br>ÊàñËÆ∏ËøôÂº†Âõæ‰πüÊõ¥Â•ΩÁêÜËß£‰∫õ„ÄÇ</p>
<p><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE4LzE2ODYwYWU1YWQwMmY5OTM?x-oss-process=image/format,png" alt=""></p>
<h2 id="ÂÜç‰∏æ‰∏™‰æãÂ≠ê"><a href="#ÂÜç‰∏æ‰∏™‰æãÂ≠ê" class="headerlink" title="ÂÜç‰∏æ‰∏™‰æãÂ≠ê"></a>ÂÜç‰∏æ‰∏™‰æãÂ≠ê</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'script start'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> async2()</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'async1 end'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'async2 end'</span>)</span><br><span class="line">&#125;</span><br><span class="line">async1()</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'setTimeout'</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Promise'</span>)</span><br><span class="line">  resolve()</span><br><span class="line">&#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise1'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise2'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'script end'</span>)</span><br></pre></td></tr></table></figure>

<p>ËøôÈáåÈúÄË¶ÅÂÖàÁêÜËß£<code>async/await</code>„ÄÇ</p>
<p><code>async/await</code> Âú®Â∫ïÂ±ÇËΩ¨Êç¢Êàê‰∫Ü <code>promise</code> Âíå <code>then</code> ÂõûË∞ÉÂáΩÊï∞„ÄÇ<br>‰πüÂ∞±ÊòØËØ¥ÔºåËøôÊòØ <code>promise</code> ÁöÑËØ≠Ê≥ïÁ≥ñ„ÄÇ<br>ÊØèÊ¨°Êàë‰ª¨‰ΩøÁî® <code>await</code>, Ëß£ÈáäÂô®ÈÉΩÂàõÂª∫‰∏Ä‰∏™ <code>promise</code> ÂØπË±°ÔºåÁÑ∂ÂêéÊääÂâ©‰∏ãÁöÑ <code>async</code> ÂáΩÊï∞‰∏≠ÁöÑÊìç‰ΩúÊîæÂà∞ <code>then</code> ÂõûË∞ÉÂáΩÊï∞‰∏≠„ÄÇ<br><code>async/await</code> ÁöÑÂÆûÁé∞ÔºåÁ¶ª‰∏çÂºÄ <code>Promise</code>„ÄÇ‰ªéÂ≠óÈù¢ÊÑèÊÄùÊù•ÁêÜËß£Ôºå<code>async</code> ÊòØ‚ÄúÂºÇÊ≠•‚ÄùÁöÑÁÆÄÂÜôÔºåËÄå <code>await</code> ÊòØ <code>async wait</code> ÁöÑÁÆÄÂÜôÂèØ‰ª•ËÆ§‰∏∫ÊòØÁ≠âÂæÖÂºÇÊ≠•ÊñπÊ≥ïÊâßË°åÂÆåÊàê„ÄÇ</p>
<h3 id="ÂÖ≥‰∫é73‰ª•‰∏ãÁâàÊú¨Âíå73ÁâàÊú¨ÁöÑÂå∫Âà´"><a href="#ÂÖ≥‰∫é73‰ª•‰∏ãÁâàÊú¨Âíå73ÁâàÊú¨ÁöÑÂå∫Âà´" class="headerlink" title="ÂÖ≥‰∫é73‰ª•‰∏ãÁâàÊú¨Âíå73ÁâàÊú¨ÁöÑÂå∫Âà´"></a><strong>ÂÖ≥‰∫é73‰ª•‰∏ãÁâàÊú¨Âíå73ÁâàÊú¨ÁöÑÂå∫Âà´</strong></h3><ul>
<li>Âú®ËÄÅÁâàÊú¨ÁâàÊú¨‰ª•‰∏ãÔºåÂÖàÊâßË°å<code>promise1</code>Âíå<code>promise2</code>ÔºåÂÜçÊâßË°å<code>async1</code>„ÄÇ</li>
<li>Âú®73ÁâàÊú¨ÔºåÂÖàÊâßË°å<code>async1</code>ÂÜçÊâßË°å<code>promise1</code>Âíå<code>promise2</code>„ÄÇ</li>
</ul>
<p><strong>‰∏ªË¶ÅÂéüÂõ†ÊòØÂõ†‰∏∫Âú®Ë∞∑Ê≠å(Èáë‰∏ùÈõÄ)73ÁâàÊú¨‰∏≠Êõ¥Êîπ‰∫ÜËßÑËåÉÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</strong></p>
<p><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzIxLzE2ODZlYjI5YTZhMTk2NTg?x-oss-process=image/format,png" alt=""></p>
<ul>
<li>Âå∫Âà´Âú®‰∫é<code>RESOLVE(thenable)</code>Âíå‰πãÈó¥ÁöÑÂå∫Âà´<code>Promise.resolve(thenable)</code>„ÄÇ</li>
</ul>
<h3 id="Âú®ËÄÅÁâàÊú¨‰∏≠"><a href="#Âú®ËÄÅÁâàÊú¨‰∏≠" class="headerlink" title="Âú®ËÄÅÁâàÊú¨‰∏≠"></a><strong>Âú®ËÄÅÁâàÊú¨‰∏≠</strong></h3><ul>
<li>È¶ñÂÖàÔºå‰º†ÈÄíÁªô <code>await</code> ÁöÑÂÄºË¢´ÂåÖË£πÂú®‰∏Ä‰∏™ <code>Promise</code> ‰∏≠„ÄÇÁÑ∂ÂêéÔºåÂ§ÑÁêÜÁ®ãÂ∫èÈôÑÂä†Âà∞Ëøô‰∏™ÂåÖË£ÖÁöÑ <code>Promise</code>Ôºå‰ª•‰æøÂú® <code>Promise</code> Âèò‰∏∫ <code>fulfilled</code> ÂêéÊÅ¢Â§çËØ•ÂáΩÊï∞ÔºåÂπ∂‰∏îÊöÇÂÅúÊâßË°åÂºÇÊ≠•ÂáΩÊï∞Ôºå‰∏ÄÊó¶ <code>promise</code> Âèò‰∏∫ <code>fulfilled</code>ÔºåÊÅ¢Â§çÂºÇÊ≠•ÂáΩÊï∞ÁöÑÊâßË°å„ÄÇ</li>
<li>ÊØè‰∏™ <code>await</code> ÂºïÊìéÂøÖÈ°ªÂàõÂª∫‰∏§‰∏™È¢ùÂ§ñÁöÑ PromiseÔºàÂç≥‰ΩøÂè≥‰æßÂ∑≤ÁªèÊòØ‰∏Ä‰∏™ <code>Promise</code>ÔºâÂπ∂‰∏îÂÆÉÈúÄË¶ÅËá≥Â∞ë‰∏â‰∏™ <code>microtask</code> ÈòüÂàó <code>ticks</code>Ôºà<code>tick</code>‰∏∫Á≥ªÁªüÁöÑÁõ∏ÂØπÊó∂Èó¥Âçï‰ΩçÔºå‰πüË¢´Áß∞‰∏∫Á≥ªÁªüÁöÑÊó∂Âü∫ÔºåÊù•Ê∫ê‰∫éÂÆöÊó∂Âô®ÁöÑÂë®ÊúüÊÄß‰∏≠Êñ≠ÔºàËæìÂá∫ËÑâÂÜ≤ÔºâÔºå‰∏ÄÊ¨°‰∏≠Êñ≠Ë°®Á§∫‰∏Ä‰∏™<code>tick</code>Ôºå‰πüË¢´Áß∞ÂÅö‰∏Ä‰∏™‚ÄúÊó∂ÈíüÊª¥Á≠î‚Äù„ÄÅÊó∂Ê†á„ÄÇÔºâ„ÄÇ</li>
</ul>
<h3 id="ÂºïÁî®Ë¥∫ËÄÅÂ∏àÁü•‰πé‰∏äÁöÑ‰∏Ä‰∏™‰æãÂ≠ê"><a href="#ÂºïÁî®Ë¥∫ËÄÅÂ∏àÁü•‰πé‰∏äÁöÑ‰∏Ä‰∏™‰æãÂ≠ê" class="headerlink" title="ÂºïÁî®Ë¥∫ËÄÅÂ∏àÁü•‰πé‰∏äÁöÑ‰∏Ä‰∏™‰æãÂ≠ê"></a><strong>ÂºïÁî®Ë¥∫ËÄÅÂ∏àÁü•‰πé‰∏äÁöÑ‰∏Ä‰∏™‰æãÂ≠ê</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> p</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'ok'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÁÆÄÂåñÁêÜËß£‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> RESOLVE(p).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ok'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Â¶ÇÊûú <code>RESOLVE(p)</code> ÂØπ‰∫é <code>p</code> ‰∏∫ <code>promise</code> Áõ¥Êé•ËøîÂõû <code>p</code> ÁöÑËØùÔºåÈÇ£‰πà <code>p</code>ÁöÑ <code>then</code> ÊñπÊ≥ïÂ∞±‰ºöË¢´È©¨‰∏äË∞ÉÁî®ÔºåÂÖ∂ÂõûË∞ÉÂ∞±Á´ãÂç≥ËøõÂÖ• <code>job</code> ÈòüÂàó„ÄÇ</li>
<li>ËÄåÂ¶ÇÊûú <code>RESOLVE(p)</code> ‰∏•Ê†ºÊåâÁÖßÊ†áÂáÜÔºåÂ∫îËØ•ÊòØ‰∫ßÁîü‰∏Ä‰∏™Êñ∞ÁöÑ <code>promise</code>ÔºåÂ∞ΩÁÆ°ËØ• <code>promise</code>Á°ÆÂÆö‰ºö <code>resolve</code> ‰∏∫ <code>p</code>Ôºå‰ΩÜËøô‰∏™ËøáÁ®ãÊú¨Ë∫´ÊòØÂºÇÊ≠•ÁöÑÔºå‰πüÂ∞±ÊòØÁé∞Âú®ËøõÂÖ• <code>job</code> ÈòüÂàóÁöÑÊòØÊñ∞ <code>promise</code> ÁöÑ <code>resolve</code>ËøáÁ®ãÔºåÊâÄ‰ª•ËØ• <code>promise</code> ÁöÑ <code>then</code> ‰∏ç‰ºöË¢´Á´ãÂç≥Ë∞ÉÁî®ÔºåËÄåË¶ÅÁ≠âÂà∞ÂΩìÂâç <code>job</code> ÈòüÂàóÊâßË°åÂà∞ÂâçËø∞ <code>resolve</code> ËøáÁ®ãÊâç‰ºöË¢´Ë∞ÉÁî®ÔºåÁÑ∂ÂêéÂÖ∂ÂõûË∞ÉÔºà‰πüÂ∞±ÊòØÁªßÁª≠ <code>await</code> ‰πãÂêéÁöÑËØ≠Âè•ÔºâÊâçÂä†ÂÖ• <code>job</code> ÈòüÂàóÔºåÊâÄ‰ª•Êó∂Â∫è‰∏äÂ∞±Êôö‰∫Ü„ÄÇ</li>
</ul>
<h3 id="Ë∞∑Ê≠åÔºàÈáë‰∏ùÈõÄÔºâ73ÁâàÊú¨‰∏≠"><a href="#Ë∞∑Ê≠åÔºàÈáë‰∏ùÈõÄÔºâ73ÁâàÊú¨‰∏≠" class="headerlink" title="Ë∞∑Ê≠åÔºàÈáë‰∏ùÈõÄÔºâ73ÁâàÊú¨‰∏≠"></a><strong>Ë∞∑Ê≠åÔºàÈáë‰∏ùÈõÄÔºâ73ÁâàÊú¨‰∏≠</strong></h3><ul>
<li>‰ΩøÁî®ÂØπ<code>PromiseResolve</code>ÁöÑË∞ÉÁî®Êù•Êõ¥Êîπ<code>await</code>ÁöÑËØ≠‰πâÔºå‰ª•ÂáèÂ∞ëÂú®ÂÖ¨ÂÖ±<code>awaitPromise</code>ÊÉÖÂÜµ‰∏ãÁöÑËΩ¨Êç¢Ê¨°Êï∞„ÄÇ</li>
<li>Â¶ÇÊûú‰º†ÈÄíÁªô <code>await</code> ÁöÑÂÄºÂ∑≤ÁªèÊòØ‰∏Ä‰∏™ <code>Promise</code>ÔºåÈÇ£‰πàËøôÁßç‰ºòÂåñÈÅøÂÖç‰∫ÜÂÜçÊ¨°ÂàõÂª∫ <code>Promise</code> ÂåÖË£ÖÂô®ÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨‰ªéÊúÄÂ∞ë‰∏â‰∏™ <code>microtick</code> Âà∞Âè™Êúâ‰∏Ä‰∏™ <code>microtick</code>„ÄÇ</li>
</ul>
<h3 id="ËØ¶ÁªÜËøáÁ®ãÔºö"><a href="#ËØ¶ÁªÜËøáÁ®ãÔºö" class="headerlink" title="ËØ¶ÁªÜËøáÁ®ãÔºö"></a><strong>ËØ¶ÁªÜËøáÁ®ãÔºö</strong></h3><p><strong>73‰ª•‰∏ãÁâàÊú¨</strong></p>
<ul>
<li>È¶ñÂÖàÔºåÊâìÂç∞<code>script start</code>ÔºåË∞ÉÁî®<code>async1()</code>Êó∂ÔºåËøîÂõû‰∏Ä‰∏™<code>Promise</code>ÔºåÊâÄ‰ª•ÊâìÂç∞Âá∫Êù•<code>async2 end</code>„ÄÇ</li>
<li>ÊØè‰∏™ <code>await</code>Ôºå‰ºöÊñ∞‰∫ßÁîü‰∏Ä‰∏™<code>promise</code>,‰ΩÜËøô‰∏™ËøáÁ®ãÊú¨Ë∫´ÊòØÂºÇÊ≠•ÁöÑÔºåÊâÄ‰ª•ËØ•<code>await</code>ÂêéÈù¢‰∏ç‰ºöÁ´ãÂç≥Ë∞ÉÁî®„ÄÇ</li>
<li>ÁªßÁª≠ÊâßË°åÂêåÊ≠•‰ª£Á†ÅÔºåÊâìÂç∞<code>Promise</code>Âíå<code>script end</code>ÔºåÂ∞Ü<code>then</code>ÂáΩÊï∞ÊîæÂÖ•<strong>ÂæÆ‰ªªÂä°</strong>ÈòüÂàó‰∏≠Á≠âÂæÖÊâßË°å„ÄÇ</li>
<li>ÂêåÊ≠•ÊâßË°åÂÆåÊàê‰πãÂêéÔºåÊ£ÄÊü•<strong>ÂæÆ‰ªªÂä°</strong>ÈòüÂàóÊòØÂê¶‰∏∫<code>null</code>ÔºåÁÑ∂ÂêéÊåâÁÖßÂÖàÂÖ•ÂÖàÂá∫ËßÑÂàôÔºå‰æùÊ¨°ÊâßË°å„ÄÇ</li>
<li>ÁÑ∂ÂêéÂÖàÊâßË°åÊâìÂç∞<code>promise1</code>,Ê≠§Êó∂<code>then</code>ÁöÑÂõûË∞ÉÂáΩÊï∞ËøîÂõû<code>undefinde</code>ÔºåÊ≠§Êó∂ÂèàÊúâ<code>then</code>ÁöÑÈìæÂºèË∞ÉÁî®ÔºåÂèàÊîæÂÖ•<strong>ÂæÆ‰ªªÂä°</strong>ÈòüÂàó‰∏≠ÔºåÂÜçÊ¨°ÊâìÂç∞<code>promise2</code>„ÄÇ</li>
<li>ÂÜçÂõûÂà∞<code>await</code>ÁöÑ‰ΩçÁΩÆÊâßË°åËøîÂõûÁöÑ <code>Promise</code> ÁöÑ <code>resolve</code> ÂáΩÊï∞ÔºåËøôÂèà‰ºöÊää <code>resolve</code> ‰∏¢Âà∞ÂæÆ‰ªªÂä°ÈòüÂàó‰∏≠ÔºåÊâìÂç∞<code>async1 end</code>„ÄÇ</li>
<li>ÂΩì<strong>ÂæÆ‰ªªÂä°</strong>ÈòüÂàó‰∏∫Á©∫Êó∂ÔºåÊâßË°åÂÆè‰ªªÂä°,ÊâìÂç∞<code>setTimeout</code>„ÄÇ</li>
</ul>
<p><strong>Ë∞∑Ê≠åÔºàÈáë‰∏ùÈõÄ73ÁâàÊú¨Ôºâ</strong></p>
<ul>
<li>Â¶ÇÊûú‰º†ÈÄíÁªô <code>await</code> ÁöÑÂÄºÂ∑≤ÁªèÊòØ‰∏Ä‰∏™ <code>Promise</code>ÔºåÈÇ£‰πàËøôÁßç‰ºòÂåñÈÅøÂÖç‰∫ÜÂÜçÊ¨°ÂàõÂª∫ <code>Promise</code> ÂåÖË£ÖÂô®ÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨‰ªéÊúÄÂ∞ë‰∏â‰∏™ <code>microtick</code> Âà∞Âè™Êúâ‰∏Ä‰∏™ <code>microtick</code>„ÄÇ</li>
<li>ÂºïÊìé‰∏çÂÜçÈúÄË¶Å‰∏∫ <code>await</code> ÂàõÈÄ† <code>throwaway Promise</code> - Âú®ÁªùÂ§ßÈÉ®ÂàÜÊó∂Èó¥„ÄÇ</li>
<li>Áé∞Âú® <code>promise</code> ÊåáÂêë‰∫ÜÂêå‰∏Ä‰∏™ <code>Promise</code>ÔºåÊâÄ‰ª•Ëøô‰∏™Ê≠•È™§‰ªÄ‰πà‰πü‰∏çÈúÄË¶ÅÂÅö„ÄÇÁÑ∂ÂêéÂºïÊìéÁªßÁª≠ÂÉè‰ª•Ââç‰∏ÄÊ†∑ÔºåÂàõÂª∫ <code>throwaway Promise</code>ÔºåÂÆâÊéí <code>PromiseReactionJob</code> Âú® <code>microtask</code> ÈòüÂàóÁöÑ‰∏ã‰∏Ä‰∏™ <code>tick</code> ‰∏äÊÅ¢Â§çÂºÇÊ≠•ÂáΩÊï∞ÔºåÊöÇÂÅúÊâßË°åËØ•ÂáΩÊï∞ÔºåÁÑ∂ÂêéËøîÂõûÁªôË∞ÉÁî®ËÄÖ„ÄÇ</li>
</ul>
<p>ÂÖ∑‰ΩìËØ¶ÊÉÖÊü•ÁúãÔºà<a href="https://v8.js.cn/blog/fast-async/" target="_blank" rel="noopener">ËøôÈáå</a>Ôºâ„ÄÇ</p>
<h2 id="NodeJSÁöÑEvent-Loop"><a href="#NodeJSÁöÑEvent-Loop" class="headerlink" title="NodeJSÁöÑEvent Loop"></a>NodeJSÁöÑEvent Loop</h2><p><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE4LzE2ODYwZjM1ZDNhM2U1MGQ?x-oss-process=image/format,png" alt=""></p>
<p><code>Node</code>‰∏≠ÁöÑ<code>Event Loop</code>ÊòØÂü∫‰∫é<code>libuv</code>ÂÆûÁé∞ÁöÑÔºåËÄå<code>libuv</code>ÊòØ <code>Node</code> ÁöÑÊñ∞Ë∑®Âπ≥Âè∞ÊäΩË±°Â±ÇÔºålibuv‰ΩøÁî®ÂºÇÊ≠•Ôºå‰∫ã‰ª∂È©±Âä®ÁöÑÁºñÁ®ãÊñπÂºèÔºåÊ†∏ÂøÉÊòØÊèê‰æõ<code>i/o</code>ÁöÑ‰∫ã‰ª∂Âæ™ÁéØÂíåÂºÇÊ≠•ÂõûË∞É„ÄÇlibuvÁöÑ<code>API</code>ÂåÖÂê´ÊúâÊó∂Èó¥ÔºåÈùûÈòªÂ°ûÁöÑÁΩëÁªúÔºåÂºÇÊ≠•Êñá‰ª∂Êìç‰ΩúÔºåÂ≠êËøõÁ®ãÁ≠âÁ≠â„ÄÇ <code>Event Loop</code>Â∞±ÊòØÂú®<code>libuv</code>‰∏≠ÂÆûÁé∞ÁöÑ„ÄÇ</p>
<p><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE4LzE2ODYwZjhmOGY3ZjA1M2Q?x-oss-process=image/format,png" alt=""></p>
<h3 id="NodeÁöÑEvent-loop‰∏ÄÂÖ±ÂàÜ‰∏∫6‰∏™Èò∂ÊÆµÔºåÊØè‰∏™ÁªÜËäÇÂÖ∑‰ΩìÂ¶Ç‰∏ã"><a href="#NodeÁöÑEvent-loop‰∏ÄÂÖ±ÂàÜ‰∏∫6‰∏™Èò∂ÊÆµÔºåÊØè‰∏™ÁªÜËäÇÂÖ∑‰ΩìÂ¶Ç‰∏ã" class="headerlink" title="NodeÁöÑEvent loop‰∏ÄÂÖ±ÂàÜ‰∏∫6‰∏™Èò∂ÊÆµÔºåÊØè‰∏™ÁªÜËäÇÂÖ∑‰ΩìÂ¶Ç‰∏ã"></a><code>Node</code>ÁöÑ<code>Event loop</code>‰∏ÄÂÖ±ÂàÜ‰∏∫6‰∏™Èò∂ÊÆµÔºåÊØè‰∏™ÁªÜËäÇÂÖ∑‰ΩìÂ¶Ç‰∏ã</h3><ul>
<li><code>timers</code>: ÊâßË°å<code>setTimeout</code>Âíå<code>setInterval</code>‰∏≠Âà∞ÊúüÁöÑ<code>callback</code>„ÄÇ</li>
<li><code>pending callback</code>: ‰∏ä‰∏ÄËΩÆÂæ™ÁéØ‰∏≠Â∞ëÊï∞ÁöÑ<code>callback</code>‰ºöÊîæÂú®Ëøô‰∏ÄÈò∂ÊÆµÊâßË°å„ÄÇ</li>
<li><code>idle, prepare</code>: ‰ªÖÂú®ÂÜÖÈÉ®‰ΩøÁî®„ÄÇ</li>
<li><code>poll</code>: ÊúÄÈáçË¶ÅÁöÑÈò∂ÊÆµÔºåÊâßË°å<code>pending callback</code>ÔºåÂú®ÈÄÇÂΩìÁöÑÊÉÖÂÜµ‰∏ãÂõûÈòªÂ°ûÂú®Ëøô‰∏™Èò∂ÊÆµ„ÄÇ</li>
<li><code>check</code>: ÊâßË°å<code>setImmediate</code>(<code>setImmediate()</code>ÊòØÂ∞Ü‰∫ã‰ª∂ÊèíÂÖ•Âà∞‰∫ã‰ª∂ÈòüÂàóÂ∞æÈÉ®Ôºå‰∏ªÁ∫øÁ®ãÂíå‰∫ã‰ª∂ÈòüÂàóÁöÑÂáΩÊï∞ÊâßË°åÂÆåÊàê‰πãÂêéÁ´ãÂç≥ÊâßË°å<code>setImmediate</code>ÊåáÂÆöÁöÑÂõûË∞ÉÂáΩÊï∞)ÁöÑ<code>callback</code>„ÄÇ</li>
<li><code>close callbacks</code>: ÊâßË°å<code>close</code>‰∫ã‰ª∂ÁöÑ<code>callback</code>Ôºå‰æãÂ¶Ç<code>socket.on(&#39;close&#39;[,fn])</code>ÊàñËÄÖ<code>http.server.on(&#39;close, fn)</code>„ÄÇ</li>
</ul>
<p>ÂÖ∑‰ΩìÁªÜËäÇÂ¶Ç‰∏ãÔºö</p>
<h3 id="timers"><a href="#timers" class="headerlink" title="timers"></a>timers</h3><p>ÊâßË°å<code>setTimeout</code>Âíå<code>setInterval</code>‰∏≠Âà∞ÊúüÁöÑ<code>callback</code>ÔºåÊâßË°åËøô‰∏§ËÄÖÂõûË∞ÉÈúÄË¶ÅËÆæÁΩÆ‰∏Ä‰∏™ÊØ´ÁßíÊï∞ÔºåÁêÜËÆ∫‰∏äÊù•ËØ¥ÔºåÂ∫îËØ•ÊòØÊó∂Èó¥‰∏ÄÂà∞Â∞±Á´ãÂç≥ÊâßË°åcallbackÂõûË∞ÉÔºå‰ΩÜÊòØÁî±‰∫é<code>system</code>ÁöÑË∞ÉÂ∫¶ÂèØËÉΩ‰ºöÂª∂Êó∂ÔºåËææ‰∏çÂà∞È¢ÑÊúüÊó∂Èó¥„ÄÇ<br>‰ª•‰∏ãÊòØÂÆòÁΩëÊñáÊ°£Ëß£ÈáäÁöÑ‰æãÂ≠êÔºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">someAsyncOperation</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Assume this takes 95ms to complete</span></span><br><span class="line">  fs.readFile(<span class="string">'/path/to/file'</span>, callback);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> timeoutScheduled = <span class="built_in">Date</span>.now();</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> delay = <span class="built_in">Date</span>.now() - timeoutScheduled;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;delay&#125;</span>ms have passed since I was scheduled`</span>);</span><br><span class="line">&#125;, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// do someAsyncOperation which takes 95 ms to complete</span></span><br><span class="line">someAsyncOperation(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> startCallback = <span class="built_in">Date</span>.now();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// do something that will take 10ms...</span></span><br><span class="line">  <span class="keyword">while</span> (<span class="built_in">Date</span>.now() - startCallback &lt; <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="comment">// do nothing</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ÂΩìËøõÂÖ•‰∫ã‰ª∂Âæ™ÁéØÊó∂ÔºåÂÆÉÊúâ‰∏Ä‰∏™Á©∫ÈòüÂàóÔºà<code>fs.readFile()</code>Â∞öÊú™ÂÆåÊàêÔºâÔºåÂõ†Ê≠§ÂÆöÊó∂Âô®Â∞ÜÁ≠âÂæÖÂâ©‰ΩôÊØ´ÁßíÊï∞ÔºåÂΩìÂà∞Ëææ95msÊó∂Ôºå<code>fs.readFile()</code>ÂÆåÊàêËØªÂèñÊñá‰ª∂Âπ∂‰∏îÂÖ∂ÂÆåÊàêÈúÄË¶Å10ÊØ´ÁßíÁöÑÂõûË∞ÉË¢´Ê∑ªÂä†Âà∞ËΩÆËØ¢ÈòüÂàóÂπ∂ÊâßË°å„ÄÇ<br>ÂΩìÂõûË∞ÉÁªìÊùüÊó∂ÔºåÈòüÂàó‰∏≠‰∏çÂÜçÊúâÂõûË∞ÉÔºåÂõ†Ê≠§‰∫ã‰ª∂Âæ™ÁéØÂ∞ÜÁúãÂà∞Â∑≤ËææÂà∞ÊúÄÂø´ÂÆöÊó∂Âô®ÁöÑ<strong>ÈòàÂÄº</strong>ÔºåÁÑ∂ÂêéÂõûÂà∞<strong>timersÈò∂ÊÆµ</strong>‰ª•ÊâßË°åÂÆöÊó∂Âô®ÁöÑÂõûË∞É„ÄÇ</p>
<p>Âú®Ê≠§Á§∫‰æã‰∏≠ÔºåÊÇ®Â∞ÜÁúãÂà∞Ê≠£Âú®Ë∞ÉÂ∫¶ÁöÑËÆ°Êó∂Âô®‰∏éÊ≠£Âú®ÊâßË°åÁöÑÂõûË∞É‰πãÈó¥ÁöÑÊÄªÂª∂ËøüÂ∞Ü‰∏∫105ÊØ´Áßí„ÄÇ</p>
<p><strong>‰ª•‰∏ãÊòØÊàëÊµãËØïÊó∂Èó¥Ôºö</strong></p>
<p><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE5LzE2ODY0YjgxNzdjMjVlYWY?x-oss-process=image/format,png" alt=""></p>
<h3 id="pending-callbacks"><a href="#pending-callbacks" class="headerlink" title="pending callbacks"></a>pending callbacks</h3><p>Ê≠§Èò∂ÊÆµÊâßË°åÊüê‰∫õÁ≥ªÁªüÊìç‰ΩúÔºà‰æãÂ¶ÇTCPÈîôËØØÁ±ªÂûãÔºâÁöÑÂõûË∞É„ÄÇ ‰æãÂ¶ÇÔºåÂ¶ÇÊûú<code>TCP socket ECONNREFUSED</code>Âú®Â∞ùËØïconnectÊó∂receivesÔºåÂàôÊüê‰∫õ* nixÁ≥ªÁªüÂ∏åÊúõÁ≠âÂæÖÊä•ÂëäÈîôËØØ„ÄÇ ËøôÂ∞ÜÂú®<code>pending callbacks</code>Èò∂ÊÆµÊâßË°å„ÄÇ</p>
<h3 id="poll"><a href="#poll" class="headerlink" title="poll"></a>poll</h3><p><strong>ËØ•pollÈò∂ÊÆµÊúâ‰∏§‰∏™‰∏ªË¶ÅÂäüËÉΩÔºö</strong></p>
<ul>
<li>ÊâßË°å<code>I/O</code>ÂõûË∞É„ÄÇ</li>
<li>Â§ÑÁêÜËΩÆËØ¢ÈòüÂàó‰∏≠ÁöÑ‰∫ã‰ª∂„ÄÇ</li>
</ul>
<p><strong>ÂΩì‰∫ã‰ª∂Âæ™ÁéØËøõÂÖ•<code>poll</code>Èò∂ÊÆµÂπ∂‰∏îÂú®<code>timers</code>‰∏≠Ê≤°ÊúâÂèØ‰ª•ÊâßË°åÂÆöÊó∂Âô®Êó∂ÔºåÂ∞ÜÂèëÁîü‰ª•‰∏ã‰∏§ÁßçÊÉÖÂÜµ‰πã‰∏Ä</strong></p>
<ul>
<li>Â¶ÇÊûú<code>poll</code>ÈòüÂàó‰∏ç‰∏∫Á©∫ÔºåÂàô‰∫ã‰ª∂Âæ™ÁéØÂ∞ÜÈÅçÂéÜÂÖ∂ÂêåÊ≠•ÊâßË°åÂÆÉ‰ª¨ÁöÑ<code>callback</code>ÈòüÂàóÔºåÁõ¥Âà∞ÈòüÂàó‰∏∫Á©∫ÔºåÊàñËÄÖËææÂà∞<code>system-dependent</code>ÔºàÁ≥ªÁªüÁõ∏ÂÖ≥ÈôêÂà∂Ôºâ„ÄÇ</li>
</ul>
<p><strong>Â¶ÇÊûú<code>poll</code>ÈòüÂàó‰∏∫Á©∫ÔºåÂàô‰ºöÂèëÁîü‰ª•‰∏ã‰∏§ÁßçÊÉÖÂÜµ‰πã‰∏Ä</strong></p>
<ul>
<li><p>Â¶ÇÊûúÊúâ<code>setImmediate()</code>ÂõûË∞ÉÈúÄË¶ÅÊâßË°åÔºåÂàô‰ºöÁ´ãÂç≥ÂÅúÊ≠¢ÊâßË°å<code>poll</code>Èò∂ÊÆµÂπ∂ËøõÂÖ•ÊâßË°å<code>check</code>Èò∂ÊÆµ‰ª•ÊâßË°åÂõûË∞É„ÄÇ</p>
</li>
<li><p>Â¶ÇÊûúÊ≤°Êúâ<code>setImmediate()</code>ÂõûÂà∞ÈúÄË¶ÅÊâßË°åÔºåpollÈò∂ÊÆµÂ∞ÜÁ≠âÂæÖ<code>callback</code>Ë¢´Ê∑ªÂä†Âà∞ÈòüÂàó‰∏≠ÔºåÁÑ∂ÂêéÁ´ãÂç≥ÊâßË°å„ÄÇ</p>
</li>
</ul>
<p><strong>ÂΩìÁÑ∂ËÆæÂÆö‰∫Ü timer ÁöÑËØù‰∏î poll ÈòüÂàó‰∏∫Á©∫ÔºåÂàô‰ºöÂà§Êñ≠ÊòØÂê¶Êúâ timer Ë∂ÖÊó∂ÔºåÂ¶ÇÊûúÊúâÁöÑËØù‰ºöÂõûÂà∞ timer Èò∂ÊÆµÊâßË°åÂõûË∞É„ÄÇ</strong></p>
<h3 id="check"><a href="#check" class="headerlink" title="check"></a>check</h3><p><strong>Ê≠§Èò∂ÊÆµÂÖÅËÆ∏‰∫∫ÂëòÂú®pollÈò∂ÊÆµÂÆåÊàêÂêéÁ´ãÂç≥ÊâßË°åÂõûË∞É„ÄÇ</strong><br>Â¶ÇÊûú<code>poll</code>Èò∂ÊÆµÈó≤ÁΩÆÂπ∂‰∏î<code>script</code>Â∑≤ÊéíÈòü<code>setImmediate()</code>ÔºåÂàô‰∫ã‰ª∂Âæ™ÁéØÂà∞ËææcheckÈò∂ÊÆµÊâßË°åËÄå‰∏çÊòØÁªßÁª≠Á≠âÂæÖ„ÄÇ</p>
<p><code>setImmediate()</code>ÂÆûÈôÖ‰∏äÊòØ‰∏Ä‰∏™ÁâπÊÆäÁöÑËÆ°Êó∂Âô®ÔºåÂÆÉÂú®‰∫ã‰ª∂Âæ™ÁéØÁöÑ‰∏Ä‰∏™ÂçïÁã¨Èò∂ÊÆµËøêË°å„ÄÇÂÆÉ‰ΩøÁî®<code>libuv API</code>Êù•Ë∞ÉÂ∫¶Âú®<code>poll</code>Èò∂ÊÆµÂÆåÊàêÂêéÊâßË°åÁöÑÂõûË∞É„ÄÇ</p>
<p>ÈÄöÂ∏∏ÔºåÂΩì‰ª£Á†ÅË¢´ÊâßË°åÊó∂Ôºå‰∫ã‰ª∂Âæ™ÁéØÊúÄÁªàÂ∞ÜËææÂà∞<code>poll</code>Èò∂ÊÆµÔºåÂÆÉÂ∞ÜÁ≠âÂæÖ‰º†ÂÖ•ËøûÊé•ÔºåËØ∑Ê±ÇÁ≠â„ÄÇ<br>‰ΩÜÊòØÔºåÂ¶ÇÊûúÂ∑≤ÁªèË∞ÉÂ∫¶‰∫ÜÂõûË∞É<code>setImmediate()</code>ÔºåÂπ∂‰∏îËΩÆËØ¢Èò∂ÊÆµÂèò‰∏∫Á©∫Èó≤ÔºåÂàôÂÆÉÂ∞ÜÁªìÊùüÂπ∂‰∏îÂà∞Ëææ<code>check</code>Èò∂ÊÆµÔºåËÄå‰∏çÊòØÁ≠âÂæÖ<code>poll</code>‰∫ã‰ª∂„ÄÇ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'start'</span>)</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'timer1'</span>)</span><br><span class="line">  <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise1'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'timer2'</span>)</span><br><span class="line">  <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'promise2'</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'promise3'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'end'</span>)</span><br></pre></td></tr></table></figure>

<p>Â¶ÇÊûú<code>node</code>ÁâàÊú¨‰∏∫<code>v11.x</code>Ôºå ÂÖ∂ÁªìÊûú‰∏éÊµèËßàÂô®‰∏ÄËá¥„ÄÇ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">start</span><br><span class="line">end</span><br><span class="line">promise3</span><br><span class="line">timer1</span><br><span class="line">promise1</span><br><span class="line">timer2</span><br><span class="line">promise2</span><br></pre></td></tr></table></figure>

<p>ÂÖ∑‰ΩìËØ¶ÊÉÖÂèØ‰ª•Êü•Áúã„Ää<a href="https://juejin.im/post/5c3e8d90f265da614274218a" target="_blank" rel="noopener">ÂèàË¢´nodeÁöÑeventloopÂùë‰∫ÜÔºåËøôÊ¨°ÊòØnodeÁöÑÈîÖ</a>„Äã„ÄÇ</p>
<p>Â¶ÇÊûúv10ÁâàÊú¨‰∏äËø∞ÁªìÊûúÂ≠òÂú®‰∏§ÁßçÊÉÖÂÜµÔºö</p>
<ul>
<li>Â¶ÇÊûútime2ÂÆöÊó∂Âô®Â∑≤ÁªèÂú®ÊâßË°åÈòüÂàó‰∏≠‰∫Ü</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">start</span><br><span class="line">end</span><br><span class="line">promise3</span><br><span class="line">timer1</span><br><span class="line">timer2</span><br><span class="line">promise1</span><br><span class="line">promise2</span><br></pre></td></tr></table></figure>

<ul>
<li>Â¶ÇÊûútime2ÂÆöÊó∂Âô®Ê≤°ÊúâÂú®ÊâßË°åÂØπÂàó‰∏≠ÔºåÊâßË°åÁªìÊûú‰∏∫</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">start</span><br><span class="line">end</span><br><span class="line">promise3</span><br><span class="line">timer1</span><br><span class="line">promise1</span><br><span class="line">timer2</span><br><span class="line">promise2</span><br></pre></td></tr></table></figure>

<p>ÂÖ∑‰ΩìÊÉÖÂÜµÂèØ‰ª•ÂèÇËÄÉ<code>poll</code>Èò∂ÊÆµÁöÑ‰∏§ÁßçÊÉÖÂÜµ„ÄÇ</p>
<p>‰ªé‰∏ãÂõæÂèØËÉΩÊõ¥Â•ΩÁêÜËß£Ôºö</p>
<p><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOS8xLzE5LzE2ODY1MzBiY2Q0ZTQ1NmE?x-oss-process=image/format,png" alt=""></p>
<h2 id="setImmediate-ÁöÑsetTimeout-ÁöÑÂå∫Âà´"><a href="#setImmediate-ÁöÑsetTimeout-ÁöÑÂå∫Âà´" class="headerlink" title="setImmediate() ÁöÑsetTimeout()ÁöÑÂå∫Âà´"></a>setImmediate() ÁöÑsetTimeout()ÁöÑÂå∫Âà´</h2><p><strong><code>setImmediate</code>Âíå<code>setTimeout()</code>ÊòØÁõ∏‰ººÁöÑÔºå‰ΩÜÊ†πÊçÆÂÆÉ‰ª¨Ë¢´Ë∞ÉÁî®ÁöÑÊó∂Èó¥‰ª•‰∏çÂêåÁöÑÊñπÂºèË°®Áé∞„ÄÇ</strong></p>
<ul>
<li><code>setImmediate()</code>ËÆæËÆ°Áî®‰∫éÂú®ÂΩìÂâç<code>poll</code>Èò∂ÊÆµÂÆåÊàêÂêécheckÈò∂ÊÆµÊâßË°åËÑöÊú¨ „ÄÇ</li>
<li><code>setTimeout()</code> ÂÆâÊéíÂú®ÁªèËøáÊúÄÂ∞èÔºàmsÔºâÂêéËøêË°åÁöÑËÑöÊú¨ÔºåÂú®<code>timers</code>Èò∂ÊÆµÊâßË°å„ÄÇ</li>
</ul>
<h3 id="‰∏æ‰∏™‰æãÂ≠ê-1"><a href="#‰∏æ‰∏™‰æãÂ≠ê-1" class="headerlink" title="‰∏æ‰∏™‰æãÂ≠ê"></a>‰∏æ‰∏™‰æãÂ≠ê</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'timeout'</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">setImmediate(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'immediate'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>ÊâßË°åÂÆöÊó∂Âô®ÁöÑÈ°∫Â∫èÂ∞ÜÊ†πÊçÆË∞ÉÁî®ÂÆÉ‰ª¨ÁöÑ‰∏ä‰∏ãÊñáËÄåÊúâÊâÄ‰∏çÂêå„ÄÇ Â¶ÇÊûú‰ªé‰∏ªÊ®°Âùó‰∏≠Ë∞ÉÁî®‰∏§ËÄÖÔºåÈÇ£‰πàÊó∂Èó¥Â∞ÜÂèóÂà∞ËøõÁ®ãÊÄßËÉΩÁöÑÈôêÂà∂„ÄÇ</strong></p>
<p><strong>ÂÖ∂ÁªìÊûú‰πü‰∏ç‰∏ÄËá¥</strong></p>
<p><strong>Â¶ÇÊûúÂú®<code>I / O</code>Âë®ÊúüÂÜÖÁßªÂä®‰∏§‰∏™Ë∞ÉÁî®ÔºåÂàôÂßãÁªàÈ¶ñÂÖàÊâßË°åÁ´ãÂç≥ÂõûË∞ÉÔºö</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line">fs.readFile(__filename, () =&gt; &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'timeout'</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">  setImmediate(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'immediate'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ÂÖ∂ÁªìÊûúÂèØ‰ª•Á°ÆÂÆö‰∏ÄÂÆöÊòØ<code>immediate =&gt; timeout</code>„ÄÇ<br>‰∏ªË¶ÅÂéüÂõ†ÊòØÂú®<code>I/OÈò∂ÊÆµ</code>ËØªÂèñÊñá‰ª∂ÂêéÔºå‰∫ã‰ª∂Âæ™ÁéØ‰ºöÂÖàËøõÂÖ•<code>poll</code>Èò∂ÊÆµÔºåÂèëÁé∞Êúâ<code>setImmediate</code>ÈúÄË¶ÅÊâßË°åÔºå‰ºöÁ´ãÂç≥ËøõÂÖ•<code>check</code>Èò∂ÊÆµÊâßË°å<code>setImmediate</code>ÁöÑÂõûË∞É„ÄÇ</p>
<p>ÁÑ∂ÂêéÂÜçËøõÂÖ•<code>timers</code>Èò∂ÊÆµÔºåÊâßË°å<code>setTimeout</code>ÔºåÊâìÂç∞<code>timeout</code>„ÄÇ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span><br><span class="line">‚îå‚îÄ&gt;‚îÇ           timers          ‚îÇ</span><br><span class="line">‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span><br><span class="line">‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span><br><span class="line">‚îÇ  ‚îÇ     pending callbacks     ‚îÇ</span><br><span class="line">‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span><br><span class="line">‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span><br><span class="line">‚îÇ  ‚îÇ       idle, prepare       ‚îÇ</span><br><span class="line">‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span><br><span class="line">‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ   incoming:   ‚îÇ</span><br><span class="line">‚îÇ  ‚îÇ           poll            ‚îÇ&lt;‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  connections, ‚îÇ</span><br><span class="line">‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ   data, etc.  ‚îÇ</span><br><span class="line">‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span><br><span class="line">‚îÇ  ‚îÇ           check           ‚îÇ</span><br><span class="line">‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span><br><span class="line">‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span><br><span class="line">‚îî‚îÄ‚îÄ‚î§      close callbacks      ‚îÇ</span><br><span class="line">   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span><br></pre></td></tr></table></figure>

<h2 id="Process-nextTick"><a href="#Process-nextTick" class="headerlink" title="Process.nextTick()"></a>Process.nextTick()</h2><p><strong><code>process.nextTick()</code>ËôΩÁÑ∂ÂÆÉÊòØÂºÇÊ≠•APIÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰ΩÜÊú™Âú®Âõæ‰∏≠ÊòæÁ§∫„ÄÇËøôÊòØÂõ†‰∏∫<code>process.nextTick()</code>‰ªéÊäÄÊúØ‰∏äËÆ≤ÔºåÂÆÉ‰∏çÊòØ‰∫ã‰ª∂Âæ™ÁéØÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ</strong></p>
<ul>
<li><code>process.nextTick()</code>ÊñπÊ≥ïÂ∞Ü <code>callback</code> Ê∑ªÂä†Âà∞<code>next tick</code>ÈòüÂàó„ÄÇ ‰∏ÄÊó¶ÂΩìÂâç‰∫ã‰ª∂ËΩÆËØ¢ÈòüÂàóÁöÑ‰ªªÂä°ÂÖ®ÈÉ®ÂÆåÊàêÔºåÂú®<code>next tick</code>ÈòüÂàó‰∏≠ÁöÑÊâÄÊúâ<code>callbacks</code>‰ºöË¢´‰æùÊ¨°Ë∞ÉÁî®„ÄÇ</li>
</ul>
<p><strong>Êç¢ÁßçÁêÜËß£ÊñπÂºèÔºö</strong></p>
<ul>
<li>ÂΩìÊØè‰∏™Èò∂ÊÆµÂÆåÊàêÂêéÔºåÂ¶ÇÊûúÂ≠òÂú® <code>nextTick</code> ÈòüÂàóÔºåÂ∞±‰ºöÊ∏ÖÁ©∫ÈòüÂàó‰∏≠ÁöÑÊâÄÊúâÂõûË∞ÉÂáΩÊï∞ÔºåÂπ∂‰∏î‰ºòÂÖà‰∫éÂÖ∂‰ªñ <code>microtask</code> ÊâßË°å„ÄÇ</li>
</ul>
<h3 id="‰æãÂ≠ê"><a href="#‰æãÂ≠ê" class="headerlink" title="‰æãÂ≠ê"></a>‰æãÂ≠ê</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> bar;</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'setTimeout'</span>);</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">setImmediate(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'setImmediate'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">someAsyncApiCall</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  process.nextTick(callback);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">someAsyncApiCall(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'bar'</span>, bar); <span class="comment">// 1</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">bar = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>Âú®NodeV10‰∏≠‰∏äËø∞‰ª£Á†ÅÊâßË°åÂèØËÉΩÊúâ‰∏§ÁßçÁ≠îÊ°àÔºå‰∏ÄÁßç‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bar <span class="number">1</span></span><br><span class="line">setTimeout</span><br><span class="line">setImmediate</span><br></pre></td></tr></table></figure>

<p>Âè¶‰∏ÄÁßç‰∏∫Ôºö</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bar <span class="number">1</span></span><br><span class="line">setImmediate</span><br><span class="line">setTimeout</span><br></pre></td></tr></table></figure>

<p>Êó†ËÆ∫Âì™ÁßçÔºåÂßãÁªàÈÉΩÊòØÂÖàÊâßË°å<code>process.nextTick(callback)</code>ÔºåÊâìÂç∞<code>bar 1</code>„ÄÇ</p>
<h2 id="ÊúÄÂêé"><a href="#ÊúÄÂêé" class="headerlink" title="ÊúÄÂêé"></a>ÊúÄÂêé</h2><p>ÊÑüË∞¢@Dante_HuÊèêÂá∫Ëøô‰∏™ÈóÆÈ¢ò<code>await</code>ÁöÑÈóÆÈ¢òÔºåÊñáÁ´†Â∑≤Áªè‰øÆÊ≠£„ÄÇ ‰øÆÊîπ‰∫ÜnodeÁ´ØÊâßË°åÁªìÊûú„ÄÇV10ÂíåV11ÁöÑÂå∫Âà´„ÄÇ</p>
<h3 id="ÂÖ≥‰∫éawaitÈóÆÈ¢òÂèÇËÄÉ‰∫Ü‰ª•‰∏ãÊñáÁ´†Ôºö"><a href="#ÂÖ≥‰∫éawaitÈóÆÈ¢òÂèÇËÄÉ‰∫Ü‰ª•‰∏ãÊñáÁ´†Ôºö" class="headerlink" title="ÂÖ≥‰∫éawaitÈóÆÈ¢òÂèÇËÄÉ‰∫Ü‰ª•‰∏ãÊñáÁ´†Ôºö"></a><strong>ÂÖ≥‰∫éawaitÈóÆÈ¢òÂèÇËÄÉ‰∫Ü‰ª•‰∏ãÊñáÁ´†Ôºö</strong></h3><p>„Ää<a href="https://github.com/xianshenglu/blog/issues/60" target="_blank" rel="noopener">promise, async, await, execution order</a>„Äã<br>„Ää<a href="https://github.com/tc39/ecma262/pull/1250" target="_blank" rel="noopener">Normative: Reduce the number of ticks in async/await</a>„Äã<br>„Ää<a href="https://www.zhihu.com/question/268007969" target="_blank" rel="noopener">async/await Âú®chrome ÁéØÂ¢ÉÂíå node ÁéØÂ¢ÉÁöÑ ÊâßË°åÁªìÊûú‰∏ç‰∏ÄËá¥ÔºåÊ±ÇËß£Ôºü</a>„Äã<br>„Ää<a href="https://v8.js.cn/blog/fast-async/" target="_blank" rel="noopener">Êõ¥Âø´ÁöÑÂºÇÊ≠•ÂáΩÊï∞Âíå Promise</a>„Äã</p>
<h3 id="ÂÖ∂‰ªñÂÜÖÂÆπÂèÇËÄÉ‰∫Ü"><a href="#ÂÖ∂‰ªñÂÜÖÂÆπÂèÇËÄÉ‰∫Ü" class="headerlink" title="ÂÖ∂‰ªñÂÜÖÂÆπÂèÇËÄÉ‰∫Ü"></a>ÂÖ∂‰ªñÂÜÖÂÆπÂèÇËÄÉ‰∫Ü</h3><p>„Ää<a href="https://segmentfault.com/a/1190000015559210" target="_blank" rel="noopener">JSÊµèËßàÂô®‰∫ã‰ª∂Âæ™ÁéØÊú∫Âà∂</a>„Äã<br>„Ää<a href="https://segmentfault.com/a/1190000010622146" target="_blank" rel="noopener">‰ªÄ‰πàÊòØÊµèËßàÂô®ÁöÑ‰∫ã‰ª∂Âæ™ÁéØÔºàEvent LoopÔºâÔºü</a>„Äã<br>„Ää<a href="https://segmentfault.com/a/1190000013861128" target="_blank" rel="noopener">‰∏ÄÁØáÊñáÁ´†Êïô‰ºö‰Ω†Event loop‚Äî‚ÄîÊµèËßàÂô®ÂíåNode</a>„Äã<br>„Ää<a href="https://cnodejs.org/topic/5a9108d78d6e16e56bb80882" target="_blank" rel="noopener">‰∏çË¶ÅÊ∑∑Ê∑ÜnodejsÂíåÊµèËßàÂô®‰∏≠ÁöÑevent loop</a>„Äã<br>„Ää<a href="https://juejin.im/post/5c337ae06fb9a049bc4cd218" target="_blank" rel="noopener">ÊµèËßàÂô®‰∏éNodeÁöÑ‰∫ã‰ª∂Âæ™ÁéØ(Event Loop)Êúâ‰ΩïÂå∫Âà´?</a>„Äã<br>„Ää<a href="https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/" target="_blank" rel="noopener">Tasks, microtasks, queues and schedules</a>„Äã<br>„Ää<a href="https://juejin.im/book/5bdc715fe51d454e755f75ef/section/5be04a8e6fb9a04a072fd2cd#heading-3" target="_blank" rel="noopener">ÂâçÁ´ØÈù¢ËØï‰πãÈÅì</a>„Äã<br>„Ää<a href="https://www.jianshu.com/p/8e0ad01c41dc" target="_blank" rel="noopener">Node.js‰ªãÁªç5-libuvÁöÑÂü∫Êú¨Ê¶ÇÂøµ</a>„Äã<br>„Ää<a href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/" target="_blank" rel="noopener">The Node.js Event Loop, Timers, and process.nextTick()</a>„Äã<br>„Ää<a href="http://nodejs.cn/" target="_blank" rel="noopener">nodeÂÆòÁΩë</a>„Äã</p>

    </div>

    
    
    
      
  <div class="popular-posts-header">Áõ∏ÂÖ≥ÊñáÁ´†</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2020\01\11\httpÂü∫Á°ÄÂ∑©Âõ∫\" rel="bookmark">httpÂü∫Á°ÄÂ∑©Âõ∫</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2020\06\28\visibilitychangeÁõëÂê¨ÊµèËßàÂô®Ê†áÁ≠æÈ°µÊòØÂê¶ÊòæÁ§∫\" rel="bookmark">visibilitychangeÁõëÂê¨ÊµèËßàÂô®Ê†áÁ≠æÈ°µÊòØÂê¶ÊòæÁ§∫</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2020\01\12\ÂèòÈáèÂíåÁ±ªÂûã\" rel="bookmark">JSÂèòÈáèÂíåÁ±ªÂûã(ËΩ¨)</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2020\01\13\ÂàõÂª∫ÂØπË±°ÁöÑÂá†ÁßçÊñπÂºè\" rel="bookmark">ÂàõÂª∫ÂØπË±°ÁöÑÂá†ÁßçÊñπÂºè</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2020\01\14\promise„ÄÅasync„ÄÅawait‰∏éeventLoop\" rel="bookmark">promise„ÄÅasync„ÄÅawait‰∏éeventLoop</a></div>
    </li>
  </ul>
<div>
    
        <div style="text-align:center;color: #333;font-size:14px;">-------------Êú¨ÊñáÁªìÊùü <i class="fa fa-hand-peace"></i> ÊÑüË∞¢ÊÇ®ÁöÑÈòÖËØª-------------</div>
    
</div>

        <div class="reward-container">
  <div>ÊÑüË∞¢ÊÇ®ÂòûÊîØÊåÅ.</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    ÊâìËµè
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="https://asenper.gitee.io/images/wechatpay.jpg" alt="ZJT ÂæÆ‰ø°ÊîØ‰ªò">
        <p>ÂæÆ‰ø°ÊîØ‰ªò</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="https://asenper.gitee.io/images/alipay.jpg" alt="ZJT ÊîØ‰ªòÂÆù">
        <p>ÊîØ‰ªòÂÆù</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Êú¨Êñá‰ΩúËÄÖÔºö </strong>ZJT
  </li>
  <li class="post-copyright-link">
    <strong>Êú¨ÊñáÈìæÊé•Ôºö</strong>
    <a href="http://blog.asenper.cn/2020/01/02/%E4%B8%80%E6%AC%A1%E5%BC%84%E6%87%82EventLoop/" title="‰∏ÄÊ¨°ÂºÑÊáÇEventLoop">http://blog.asenper.cn/2020/01/02/‰∏ÄÊ¨°ÂºÑÊáÇEventLoop/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ÁâàÊùÉÂ£∞ÊòéÔºö </strong>Êú¨ÂçöÂÆ¢ÊâÄÊúâÊñáÁ´†Èô§ÁâπÂà´Â£∞ÊòéÂ§ñÔºåÂùáÈááÁî® <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> ËÆ∏ÂèØÂçèËÆÆ„ÄÇËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§ÑÔºÅ
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/JS/" rel="tag"><i class="fa fa-tag"></i> JS</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/01/11/http%E5%9F%BA%E7%A1%80%E5%B7%A9%E5%9B%BA/" rel="prev" class="prev" title="httpÂü∫Á°ÄÂ∑©Âõ∫">
      <span> ‰∏ä‰∏ÄÁØáÔºöhttpÂü∫Á°ÄÂ∑©Âõ∫ </span>
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/10/20/%E8%9F%92%E5%B1%B1%E9%81%9B%E4%B8%80%E9%81%9B/" rel="next" class="next" title="ËüíÂ±±ÈÅõ‰∏ÄÈÅõ">
      <span> ‰∏ã‰∏ÄÁØáÔºöËüíÂ±±ÈÅõ‰∏ÄÈÅõ </span>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  




          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          ÊñáÁ´†ÁõÆÂΩï
        </li>
        <li class="sidebar-nav-overview">
          Á´ôÁÇπÊ¶ÇËßà
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#ÂâçË®Ä"><span class="nav-number">1.</span> <span class="nav-text">ÂâçË®Ä</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#‰∏∫Âï•Ë¶ÅÂºÑÊáÇEvent-Loop"><span class="nav-number">2.</span> <span class="nav-text">‰∏∫Âï•Ë¶ÅÂºÑÊáÇEvent Loop</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Â†ÜÔºåÊ†à„ÄÅÈòüÂàó"><span class="nav-number">3.</span> <span class="nav-text">Â†ÜÔºåÊ†à„ÄÅÈòüÂàó</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Â†ÜÔºàHeapÔºâ"><span class="nav-number">3.1.</span> <span class="nav-text">Â†ÜÔºàHeapÔºâ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ê†àÔºàStackÔºâ"><span class="nav-number">3.2.</span> <span class="nav-text">Ê†àÔºàStackÔºâ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ÈòüÂàóÔºàQueueÔºâ"><span class="nav-number">3.3.</span> <span class="nav-text">ÈòüÂàóÔºàQueueÔºâ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Event-Loop"><span class="nav-number">4.</span> <span class="nav-text">Event Loop</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MacroTaskÔºàÂÆè‰ªªÂä°Ôºâ"><span class="nav-number">4.1.</span> <span class="nav-text">MacroTaskÔºàÂÆè‰ªªÂä°Ôºâ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MicroTaskÔºàÂæÆ‰ªªÂä°Ôºâ"><span class="nav-number">4.2.</span> <span class="nav-text">MicroTaskÔºàÂæÆ‰ªªÂä°Ôºâ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ÊµèËßàÂô®‰∏≠ÁöÑEvent-Loop"><span class="nav-number">5.</span> <span class="nav-text">ÊµèËßàÂô®‰∏≠ÁöÑEvent Loop</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JSË∞ÉÁî®Ê†à"><span class="nav-number">5.1.</span> <span class="nav-text">JSË∞ÉÁî®Ê†à</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ÂêåÊ≠•‰ªªÂä°ÂíåÂºÇÊ≠•‰ªªÂä°"><span class="nav-number">5.2.</span> <span class="nav-text">ÂêåÊ≠•‰ªªÂä°ÂíåÂºÇÊ≠•‰ªªÂä°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#‰∫ã‰ª∂Âæ™ÁéØÁöÑËøõÁ®ãÊ®°Âûã"><span class="nav-number">5.3.</span> <span class="nav-text">‰∫ã‰ª∂Âæ™ÁéØÁöÑËøõÁ®ãÊ®°Âûã</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ÊâßË°åËøõÂÖ•microtaskÊ£ÄÊü•ÁÇπÊó∂ÔºåÁî®Êà∑‰ª£ÁêÜ‰ºöÊâßË°å‰ª•‰∏ãÊ≠•È™§"><span class="nav-number">5.4.</span> <span class="nav-text">ÊâßË°åËøõÂÖ•microtaskÊ£ÄÊü•ÁÇπÊó∂ÔºåÁî®Êà∑‰ª£ÁêÜ‰ºöÊâßË°å‰ª•‰∏ãÊ≠•È™§</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#‰∏æ‰∏™‰æãÂ≠ê"><span class="nav-number">6.</span> <span class="nav-text">‰∏æ‰∏™‰æãÂ≠ê</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Á¨¨‰∏ÄÊ¨°ÊâßË°å"><span class="nav-number">6.1.</span> <span class="nav-text">Á¨¨‰∏ÄÊ¨°ÊâßË°å</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Á¨¨‰∫åÊ¨°ÊâßË°å"><span class="nav-number">6.2.</span> <span class="nav-text">Á¨¨‰∫åÊ¨°ÊâßË°å</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Á¨¨‰∏âÊ¨°ÊâßË°å"><span class="nav-number">6.3.</span> <span class="nav-text">Á¨¨‰∏âÊ¨°ÊâßË°å</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Á¨¨ÂõõÊ¨°ÊâßË°å"><span class="nav-number">6.4.</span> <span class="nav-text">Á¨¨ÂõõÊ¨°ÊâßË°å</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ÂÜç‰∏æ‰∏™‰æãÂ≠ê"><span class="nav-number">7.</span> <span class="nav-text">ÂÜç‰∏æ‰∏™‰æãÂ≠ê</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ÂÖ≥‰∫é73‰ª•‰∏ãÁâàÊú¨Âíå73ÁâàÊú¨ÁöÑÂå∫Âà´"><span class="nav-number">7.1.</span> <span class="nav-text">ÂÖ≥‰∫é73‰ª•‰∏ãÁâàÊú¨Âíå73ÁâàÊú¨ÁöÑÂå∫Âà´</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Âú®ËÄÅÁâàÊú¨‰∏≠"><span class="nav-number">7.2.</span> <span class="nav-text">Âú®ËÄÅÁâàÊú¨‰∏≠</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ÂºïÁî®Ë¥∫ËÄÅÂ∏àÁü•‰πé‰∏äÁöÑ‰∏Ä‰∏™‰æãÂ≠ê"><span class="nav-number">7.3.</span> <span class="nav-text">ÂºïÁî®Ë¥∫ËÄÅÂ∏àÁü•‰πé‰∏äÁöÑ‰∏Ä‰∏™‰æãÂ≠ê</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ë∞∑Ê≠åÔºàÈáë‰∏ùÈõÄÔºâ73ÁâàÊú¨‰∏≠"><span class="nav-number">7.4.</span> <span class="nav-text">Ë∞∑Ê≠åÔºàÈáë‰∏ùÈõÄÔºâ73ÁâàÊú¨‰∏≠</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ËØ¶ÁªÜËøáÁ®ãÔºö"><span class="nav-number">7.5.</span> <span class="nav-text">ËØ¶ÁªÜËøáÁ®ãÔºö</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NodeJSÁöÑEvent-Loop"><span class="nav-number">8.</span> <span class="nav-text">NodeJSÁöÑEvent Loop</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#NodeÁöÑEvent-loop‰∏ÄÂÖ±ÂàÜ‰∏∫6‰∏™Èò∂ÊÆµÔºåÊØè‰∏™ÁªÜËäÇÂÖ∑‰ΩìÂ¶Ç‰∏ã"><span class="nav-number">8.1.</span> <span class="nav-text">NodeÁöÑEvent loop‰∏ÄÂÖ±ÂàÜ‰∏∫6‰∏™Èò∂ÊÆµÔºåÊØè‰∏™ÁªÜËäÇÂÖ∑‰ΩìÂ¶Ç‰∏ã</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#timers"><span class="nav-number">8.2.</span> <span class="nav-text">timers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pending-callbacks"><span class="nav-number">8.3.</span> <span class="nav-text">pending callbacks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#poll"><span class="nav-number">8.4.</span> <span class="nav-text">poll</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#check"><span class="nav-number">8.5.</span> <span class="nav-text">check</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#setImmediate-ÁöÑsetTimeout-ÁöÑÂå∫Âà´"><span class="nav-number">9.</span> <span class="nav-text">setImmediate() ÁöÑsetTimeout()ÁöÑÂå∫Âà´</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#‰∏æ‰∏™‰æãÂ≠ê-1"><span class="nav-number">9.1.</span> <span class="nav-text">‰∏æ‰∏™‰æãÂ≠ê</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Process-nextTick"><span class="nav-number">10.</span> <span class="nav-text">Process.nextTick()</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#‰æãÂ≠ê"><span class="nav-number">10.1.</span> <span class="nav-text">‰æãÂ≠ê</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ÊúÄÂêé"><span class="nav-number">11.</span> <span class="nav-text">ÊúÄÂêé</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ÂÖ≥‰∫éawaitÈóÆÈ¢òÂèÇËÄÉ‰∫Ü‰ª•‰∏ãÊñáÁ´†Ôºö"><span class="nav-number">11.1.</span> <span class="nav-text">ÂÖ≥‰∫éawaitÈóÆÈ¢òÂèÇËÄÉ‰∫Ü‰ª•‰∏ãÊñáÁ´†Ôºö</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ÂÖ∂‰ªñÂÜÖÂÆπÂèÇËÄÉ‰∫Ü"><span class="nav-number">11.2.</span> <span class="nav-text">ÂÖ∂‰ªñÂÜÖÂÆπÂèÇËÄÉ‰∫Ü</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ZJT"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">ZJT</p>
  <div class="site-description" itemprop="description">Âã§ËÉΩË°•ÊãôÊòØËâØËÆ≠Ôºå‰∏ÄÂàÜËæõÂä≥‰∏ÄÂàÜÊâç„ÄÇ ‚Äî‚ÄîÂçéÁΩóÂ∫ö</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">55</span>
          <span class="site-state-item-name">Êó•Âøó</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">ÂàÜÁ±ª</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">Ê†áÁ≠æ</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/asenper" title="GitHub ‚Üí https:&#x2F;&#x2F;github.com&#x2F;asenper" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:18369656127@163.com" title="E-Mail ‚Üí mailto:18369656127@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/zjt94920" title="Weibo ‚Üí https:&#x2F;&#x2F;weibo.com&#x2F;zjt94920" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.cnblogs.com/asenper/" title="ÂçöÂÆ¢Âõ≠ ‚Üí https:&#x2F;&#x2F;www.cnblogs.com&#x2F;asenper&#x2F;" rel="noopener" target="_blank"><i class="fas fa-blog fa-fw"></i>ÂçöÂÆ¢Âõ≠</a>
      </span>
  </div>



      </div>
      
      <div class="widget-wrap">
        <h4>Ê†áÁ≠æ‰∫ë</h4>
          <div id="myCanvasContainer" class="widget tagcloud">
            <a href="/tags/Debug/" style="font-size: 16.4px; color: #2c2c2c">Debug</a> <a href="/tags/Git/" style="font-size: 13px; color: #333">Git</a> <a href="/tags/JS/" style="font-size: 30px; color: #111">JS</a> <a href="/tags/Linux/" style="font-size: 13px; color: #333">Linux</a> <a href="/tags/Nginx/" style="font-size: 19.8px; color: #252525">Nginx</a> <a href="/tags/Node/" style="font-size: 16.4px; color: #2c2c2c">Node</a> <a href="/tags/Promise/" style="font-size: 13px; color: #333">Promise</a> <a href="/tags/Vue/" style="font-size: 26.6px; color: #181818">Vue</a> <a href="/tags/Webpack/" style="font-size: 19.8px; color: #252525">Webpack</a> <a href="/tags/hexo/" style="font-size: 16.4px; color: #2c2c2c">hexo</a> <a href="/tags/markdown/" style="font-size: 13px; color: #333">markdown</a> <a href="/tags/%E5%85%B6%E5%AE%83/" style="font-size: 23.2px; color: #1f1f1f">ÂÖ∂ÂÆÉ</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 13px; color: #333">Â∞èÁ®ãÂ∫è</a> <a href="/tags/%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/" style="font-size: 13px; color: #333">ÊúùËä±Â§ïÊãæ</a>
          </div>
      </div>
      
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        








        <div class="copyright" style="text-align:center">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-bolt"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZJT</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Á´ôÁÇπÊÄªÂ≠óÊï∞">121k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Á´ôÁÇπÈòÖËØªÊó∂Èïø">1:50</span>
  <span class="post-meta-divider">|</span>
  <a href="http://valine.asenper.cn/" target="_blank" rel="noopener">ËØÑËÆ∫ÁÆ°ÁêÜ</a>
</div>
  <div class="beian"><a href="http://www.beian.miit.gov.cn/" rel="noopener" target="_blank">È≤ÅICPÂ§á20023085Âè∑ </a>
  </div>

      </div>
    </footer>
  </div>

  
<script src="https://cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>

<script src="/js/lightGallery.min.js"></script>

<script src="/js/lg-autoplay.min.js"></script>

<script src="/js/lg-zoom.js"></script>

<script src="/js/lg-thumbnail.js"></script>

<script src="/js/jquery.justifiedGallery.min.js"></script>

<script src="https://cdn.bootcdn.net/ajax/libs/dplayer/1.25.1/DPlayer.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>








  




  
<script src="/js/local-search.js"></script>














  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,link,mail';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'Ao8PCQqEzcHG6k54bnapDx47-gzGzoHsz',
      appKey     : 'KKS9DTjSEG6TChnH12zsQiyw',
      placeholder: "Êù•ËÅäËÅäÂëó",
      avatar     : 'retro',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
